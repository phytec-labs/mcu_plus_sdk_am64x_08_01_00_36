<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM64x MCU+ SDK: ECAP</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM64x MCU+ SDK
   &#160;<span id="projectnumber">08.01.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('DRIVERS_ECAP_PAGE.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ECAP </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md449">Features Supported</a></li>
<li class="level1"><a href="#autotoc_md450">SysConfig Features</a></li>
<li class="level1"><a href="#autotoc_md451">Features NOT Supported</a></li>
<li class="level1"><a href="#autotoc_md452">Important Usage Guidelines</a></li>
<li class="level1"><a href="#autotoc_md453">Example Usage</a></li>
<li class="level1"><a href="#autotoc_md454">API</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_components_drivers_ecap"></a></p>
<p>The eCAP driver provides API to configure eCAP module. Below are the high level features supported by the driver.</p>
<h1><a class="anchor" id="autotoc_md449"></a>
Features Supported</h1>
<ul>
<li>Configuration of timestamp capture event</li>
<li>Configuration of one-shot/continuous mode</li>
<li>Configuration of independent edge polarity (rising / falling edge) selection for all 4 capture events</li>
<li>Configuration of interrupt on any of the 4 capture events</li>
<li>Configuration of input signal prescaling</li>
<li>Configuration of mode to aPWM when not used in capture mode</li>
</ul>
<h1><a class="anchor" id="autotoc_md450"></a>
SysConfig Features</h1>
<dl class="section note"><dt>Note</dt><dd>It is strongly recommend to use SysConfig where it is available instead of using direct SW API calls. This will help simplify the SW application and also catch common mistakes early in the development cycle.</dd></dl>
<p>SysConfig can be used to configure below parameters apart from common configuration like Clock, MPU, RAT and others.</p><ul>
<li>ECAP instances and pin mux configurations.</li>
</ul>
<h1><a class="anchor" id="autotoc_md451"></a>
Features NOT Supported</h1>
<p>NA</p>
<h1><a class="anchor" id="autotoc_md452"></a>
Important Usage Guidelines</h1>
<p>NA</p>
<h1><a class="anchor" id="autotoc_md453"></a>
Example Usage</h1>
<p>Include the below file to access the APIs </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="ecap_8h.html">drivers/ecap.h</a>&gt;</span></div>
</div><!-- fragment --><p> ECAP Interrupt Registration </p><div class="fragment"><div class="line">    int32_t             status = <a class="code" href="group__KERNEL__DPL__SYSTEM.html#ga47e638d7c694e6d42e57b96b071b8a6f">SystemP_SUCCESS</a>;</div>
<div class="line">    <a class="code" href="structHwiP__Params.html">HwiP_Params</a>         hwiPrms;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Register interrupt */</span></div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__HWI.html#ga33f02161b1837b41f08ba064f1001045">HwiP_Params_init</a>(&amp;hwiPrms);</div>
<div class="line">    hwiPrms.<a class="code" href="structHwiP__Params.html#a943b3d55a5aaa669f8bcb04017fdf2a1">intNum</a>      = CONFIG_ECAP0_INTR;</div>
<div class="line">    hwiPrms.<a class="code" href="structHwiP__Params.html#ab8f50b1b2f678cc3ce395ee6bc89c55c">callback</a>    = &amp;App_ecapIntrISR;</div>
<div class="line">    hwiPrms.<a class="code" href="structHwiP__Params.html#a1523acb0735d5b5043923ffe620581ef">isPulse</a>     = CONFIG_ECAP0_INTR_IS_PULSE;</div>
<div class="line">    status              = <a class="code" href="group__KERNEL__DPL__HWI.html#gacda2e6e40428be67320f57d0676e4bd1">HwiP_construct</a>(&amp;gEcapHwiObject, &amp;hwiPrms);</div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__DEBUG.html#ga552e9055ca7eab5fe6c224c6cd5a9d4c">DebugP_assert</a>(status == <a class="code" href="group__KERNEL__DPL__SYSTEM.html#ga47e638d7c694e6d42e57b96b071b8a6f">SystemP_SUCCESS</a>);</div>
</div><!-- fragment --><p> ECAP Operating Mode Configuration </p><div class="fragment"><div class="line">    <span class="comment">/* Enable capture mode */</span></div>
<div class="line">    <a class="code" href="group__DRV__ECAP__MODULE.html#gafafe9505128a65c5f932d0df712f18e8">ECAPOperatingModeSelect</a>(gEcapBaseAddr, <a class="code" href="group__DRV__ECAP__MODULE.html#ga4c964e45acfe48bfd5682e17f658444b">ECAP_CAPTURE_MODE</a>);</div>
</div><!-- fragment --><p> ECAP One Shot Mode Configuration </p><div class="fragment"><div class="line">    <span class="comment">/* One shot mode, stop capture at event 4 */</span></div>
<div class="line">    <a class="code" href="group__DRV__ECAP__MODULE.html#gace6995d108b1dee8a549c64fb248dbe7">ECAPOneShotModeConfig</a>(gEcapBaseAddr, <a class="code" href="group__DRV__ECAP__MODULE.html#gaa558be40ae679cb338eda9fdca75d564">ECAP_CAPTURE_EVENT4_STOP</a>);</div>
</div><!-- fragment --><p> ECAP Capture Event Polarity Configuration </p><div class="fragment"><div class="line">    <span class="comment">/* Set polarity of the events to rising, falling, rising, falling edge */</span></div>
<div class="line">    <a class="code" href="group__DRV__ECAP__MODULE.html#gae93bd525cba96129c54cfd5e82d01a07">ECAPCaptureEvtPolarityConfig</a>(gEcapBaseAddr,</div>
<div class="line">                                 <a class="code" href="group__DRV__ECAP__MODULE.html#ga7c0ecaf52b7f4da31f76ddf731630660">ECAP_CAPTURE_EVENT_RISING</a>,</div>
<div class="line">                                 <a class="code" href="group__DRV__ECAP__MODULE.html#gabdd12191ded5820480e15524755d0afa">ECAP_CAPTURE_EVENT_FALLING</a>,</div>
<div class="line">                                 <a class="code" href="group__DRV__ECAP__MODULE.html#ga7c0ecaf52b7f4da31f76ddf731630660">ECAP_CAPTURE_EVENT_RISING</a>,</div>
<div class="line">                                 <a class="code" href="group__DRV__ECAP__MODULE.html#gabdd12191ded5820480e15524755d0afa">ECAP_CAPTURE_EVENT_FALLING</a>);</div>
</div><!-- fragment --><p> ECAP Interrupt Service Routine </p><div class="fragment"><div class="line">    <span class="comment">/* Clear Ecap Interrupt. */</span></div>
<div class="line">    <a class="code" href="group__DRV__ECAP__MODULE.html#ga378bd451c085ef5ca4448b7689d3eb1c">ECAPIntrStatusClear</a>(gEcapBaseAddr, ECAP_INT_ALL);</div>
<div class="line">    <span class="comment">/* Clear Global Interrupt Flag. */</span></div>
<div class="line">    <a class="code" href="group__DRV__ECAP__MODULE.html#gabf6860b5d762b444e2a7de59fdb00748">ECAPGlobalIntrClear</a>(gEcapBaseAddr);</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__SEMAPHORE.html#ga23075425da4d8a65a53209b5fdd3fafe">SemaphoreP_post</a>(&amp;gEcapSyncSemObject);</div>
</div><!-- fragment --><p> ECAP Interrupt De-Registration </p><div class="fragment"><div class="line">    <a class="code" href="group__KERNEL__DPL__HWI.html#ga9dac4d4990b599de54662b9e32c0b47b">HwiP_destruct</a>(&amp;gEcapHwiObject);</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md454"></a>
API</h1>
<p><a class="el" href="group__DRV__ECAP__MODULE.html">APIs for ECAP</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="agroup__DRV__ECAP__MODULE_html_ga4c964e45acfe48bfd5682e17f658444b"><div class="ttname"><a href="group__DRV__ECAP__MODULE.html#ga4c964e45acfe48bfd5682e17f658444b">ECAP_CAPTURE_MODE</a></div><div class="ttdeci">#define ECAP_CAPTURE_MODE</div><div class="ttdoc">Capture Mode.</div><div class="ttdef"><b>Definition:</b> ecap/v0/ecap.h:74</div></div>
<div class="ttc" id="agroup__DRV__ECAP__MODULE_html_gabdd12191ded5820480e15524755d0afa"><div class="ttname"><a href="group__DRV__ECAP__MODULE.html#gabdd12191ded5820480e15524755d0afa">ECAP_CAPTURE_EVENT_FALLING</a></div><div class="ttdeci">#define ECAP_CAPTURE_EVENT_FALLING</div><div class="ttdoc">Capture Event Falling Edge.</div><div class="ttdef"><b>Definition:</b> ecap/v0/ecap.h:194</div></div>
<div class="ttc" id="agroup__KERNEL__DPL__HWI_html_ga9dac4d4990b599de54662b9e32c0b47b"><div class="ttname"><a href="group__KERNEL__DPL__HWI.html#ga9dac4d4990b599de54662b9e32c0b47b">HwiP_destruct</a></div><div class="ttdeci">void HwiP_destruct(HwiP_Object *obj)</div><div class="ttdoc">Cleanup, delete, destruct a Hwi object.</div></div>
<div class="ttc" id="astructHwiP__Params_html"><div class="ttname"><a href="structHwiP__Params.html">HwiP_Params</a></div><div class="ttdoc">Parameters passed during HwiP_construct.</div><div class="ttdef"><b>Definition:</b> HwiP.h:72</div></div>
<div class="ttc" id="aecap_8h_html"><div class="ttname"><a href="ecap_8h.html">ecap.h</a></div></div>
<div class="ttc" id="agroup__DRV__ECAP__MODULE_html_gafafe9505128a65c5f932d0df712f18e8"><div class="ttname"><a href="group__DRV__ECAP__MODULE.html#gafafe9505128a65c5f932d0df712f18e8">ECAPOperatingModeSelect</a></div><div class="ttdeci">void ECAPOperatingModeSelect(uint32_t baseAddr, uint32_t modeSelect)</div><div class="ttdoc">This function configures ecapture module to operate in capture mode or in APWM mode.</div></div>
<div class="ttc" id="agroup__DRV__ECAP__MODULE_html_ga378bd451c085ef5ca4448b7689d3eb1c"><div class="ttname"><a href="group__DRV__ECAP__MODULE.html#ga378bd451c085ef5ca4448b7689d3eb1c">ECAPIntrStatusClear</a></div><div class="ttdeci">void ECAPIntrStatusClear(uint32_t baseAddr, uint32_t flag)</div><div class="ttdoc">This function clears of the status specified interrupts.</div></div>
<div class="ttc" id="agroup__KERNEL__DPL__HWI_html_gacda2e6e40428be67320f57d0676e4bd1"><div class="ttname"><a href="group__KERNEL__DPL__HWI.html#gacda2e6e40428be67320f57d0676e4bd1">HwiP_construct</a></div><div class="ttdeci">int32_t HwiP_construct(HwiP_Object *obj, HwiP_Params *params)</div><div class="ttdoc">Create a Hwi object.</div></div>
<div class="ttc" id="agroup__KERNEL__DPL__HWI_html_ga33f02161b1837b41f08ba064f1001045"><div class="ttname"><a href="group__KERNEL__DPL__HWI.html#ga33f02161b1837b41f08ba064f1001045">HwiP_Params_init</a></div><div class="ttdeci">void HwiP_Params_init(HwiP_Params *params)</div><div class="ttdoc">Set default values to HwiP_Params.</div></div>
<div class="ttc" id="agroup__DRV__ECAP__MODULE_html_gaa558be40ae679cb338eda9fdca75d564"><div class="ttname"><a href="group__DRV__ECAP__MODULE.html#gaa558be40ae679cb338eda9fdca75d564">ECAP_CAPTURE_EVENT4_STOP</a></div><div class="ttdeci">#define ECAP_CAPTURE_EVENT4_STOP</div><div class="ttdoc">Stop capture after event 4.</div><div class="ttdef"><b>Definition:</b> ecap/v0/ecap.h:106</div></div>
<div class="ttc" id="agroup__KERNEL__DPL__SYSTEM_html_ga47e638d7c694e6d42e57b96b071b8a6f"><div class="ttname"><a href="group__KERNEL__DPL__SYSTEM.html#ga47e638d7c694e6d42e57b96b071b8a6f">SystemP_SUCCESS</a></div><div class="ttdeci">#define SystemP_SUCCESS</div><div class="ttdoc">Return status when the API execution was successful.</div><div class="ttdef"><b>Definition:</b> SystemP.h:56</div></div>
<div class="ttc" id="agroup__DRV__ECAP__MODULE_html_gae93bd525cba96129c54cfd5e82d01a07"><div class="ttname"><a href="group__DRV__ECAP__MODULE.html#gae93bd525cba96129c54cfd5e82d01a07">ECAPCaptureEvtPolarityConfig</a></div><div class="ttdeci">void ECAPCaptureEvtPolarityConfig(uint32_t baseAddr, uint32_t capEvt1pol, uint32_t capEvt2pol, uint32_t capEvt3pol, uint32_t capEvt4pol)</div><div class="ttdoc">This function configures Capture Event polarity.</div></div>
<div class="ttc" id="astructHwiP__Params_html_a1523acb0735d5b5043923ffe620581ef"><div class="ttname"><a href="structHwiP__Params.html#a1523acb0735d5b5043923ffe620581ef">HwiP_Params::isPulse</a></div><div class="ttdeci">uint8_t isPulse</div><div class="ttdef"><b>Definition:</b> HwiP.h:80</div></div>
<div class="ttc" id="astructHwiP__Params_html_ab8f50b1b2f678cc3ce395ee6bc89c55c"><div class="ttname"><a href="structHwiP__Params.html#ab8f50b1b2f678cc3ce395ee6bc89c55c">HwiP_Params::callback</a></div><div class="ttdeci">HwiP_FxnCallback callback</div><div class="ttdef"><b>Definition:</b> HwiP.h:75</div></div>
<div class="ttc" id="agroup__DRV__ECAP__MODULE_html_ga7c0ecaf52b7f4da31f76ddf731630660"><div class="ttname"><a href="group__DRV__ECAP__MODULE.html#ga7c0ecaf52b7f4da31f76ddf731630660">ECAP_CAPTURE_EVENT_RISING</a></div><div class="ttdeci">#define ECAP_CAPTURE_EVENT_RISING</div><div class="ttdoc">Capture Event Rising Edge.</div><div class="ttdef"><b>Definition:</b> ecap/v0/ecap.h:192</div></div>
<div class="ttc" id="agroup__KERNEL__DPL__SEMAPHORE_html_ga23075425da4d8a65a53209b5fdd3fafe"><div class="ttname"><a href="group__KERNEL__DPL__SEMAPHORE.html#ga23075425da4d8a65a53209b5fdd3fafe">SemaphoreP_post</a></div><div class="ttdeci">void SemaphoreP_post(SemaphoreP_Object *obj)</div><div class="ttdoc">Post a semaphore object or unlock a mutex.</div></div>
<div class="ttc" id="agroup__KERNEL__DPL__DEBUG_html_ga552e9055ca7eab5fe6c224c6cd5a9d4c"><div class="ttname"><a href="group__KERNEL__DPL__DEBUG.html#ga552e9055ca7eab5fe6c224c6cd5a9d4c">DebugP_assert</a></div><div class="ttdeci">#define DebugP_assert(expression)</div><div class="ttdoc">Function to call for assert check.</div><div class="ttdef"><b>Definition:</b> DebugP.h:159</div></div>
<div class="ttc" id="astructHwiP__Params_html_a943b3d55a5aaa669f8bcb04017fdf2a1"><div class="ttname"><a href="structHwiP__Params.html#a943b3d55a5aaa669f8bcb04017fdf2a1">HwiP_Params::intNum</a></div><div class="ttdeci">uint32_t intNum</div><div class="ttdef"><b>Definition:</b> HwiP.h:74</div></div>
<div class="ttc" id="agroup__DRV__ECAP__MODULE_html_gabf6860b5d762b444e2a7de59fdb00748"><div class="ttname"><a href="group__DRV__ECAP__MODULE.html#gabf6860b5d762b444e2a7de59fdb00748">ECAPGlobalIntrClear</a></div><div class="ttdeci">void ECAPGlobalIntrClear(uint32_t baseAddr)</div><div class="ttdoc">This function clears global interrupt and enables the generation of interrupts if any of the event in...</div></div>
<div class="ttc" id="agroup__DRV__ECAP__MODULE_html_gace6995d108b1dee8a549c64fb248dbe7"><div class="ttname"><a href="group__DRV__ECAP__MODULE.html#gace6995d108b1dee8a549c64fb248dbe7">ECAPOneShotModeConfig</a></div><div class="ttdeci">void ECAPOneShotModeConfig(uint32_t baseAddr, uint32_t stopVal)</div><div class="ttdoc">This function configures ECAP to One-shot mode and also stop value for this mode.</div></div>
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
