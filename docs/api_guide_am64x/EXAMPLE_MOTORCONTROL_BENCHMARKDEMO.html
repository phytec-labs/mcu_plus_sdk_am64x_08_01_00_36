<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM64x MCU+ SDK: Benchmark Demo with Linux on A53</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM64x MCU+ SDK
   &#160;<span id="projectnumber">08.01.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('EXAMPLE_MOTORCONTROL_BENCHMARKDEMO.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Benchmark Demo with Linux on A53 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md873">Introduction</a></li>
<li class="level1"><a href="#autotoc_md874">Supported Combinations</a></li>
<li class="level1"><a href="#STEPS">Steps to Run the Example</a><ul><li class="level2"><a href="#autotoc_md875">Hardware Prerequisites</a></li>
<li class="level2"><a href="#autotoc_md876">Build the R5F side projects</a></li>
<li class="level2"><a href="#autotoc_md877">Run the demo</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md878">Sample Output</a></li>
<li class="level1"><a href="#autotoc_md879">Benchmark Results</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_examples_motorcontrol_benchmarkdemo_example_am64x"></a></p>
<h1><a class="anchor" id="autotoc_md873"></a>
Introduction</h1>
<p>The benchmark demo showcases the capabilities of the four R5F cores as well as the A53 core. This demo is run by default when <b>Processor SDK Linux</b> is flashed to SD card. Different R5F benchmarks will run on each of the four R5F cores. There are four options available for each benchmark. Users can switch the options using the drop-down menu in the GUI to view performance of R5F with each option.</p>
<p>The mapping of R5F core to the benchmark that is run is shown below </p><table class="doxtable">
<tr>
<th>R5 Core </th><th>Benchmark </th><th>Default Option </th><th>Description  </th></tr>
<tr>
<td>R5F Core 0 (rf5ss0-0) </td><td>ADC and PWM benchmark </td><td>8 Khz execution loop </td><td>ADC/PWM benchmark for R5F, here we read 5 ADC samples and do 1 PWM write. <b>NOTE: This is not enabled in current release</b>.   </td></tr>
<tr>
<td>R5F Core 1 (rf5ss0-1) </td><td>CFFT benchmark </td><td>1Khz execution loop, 128 point CFFT </td><td>CMSIS CFFT benchmark for R5F  </td></tr>
<tr>
<td>R5F Core 2 (rf5ss1-0) </td><td>FIR filtering benchmark </td><td>1 Khz execution loop, 320 point, 29-tap </td><td>CMSIS FIR filtering benchmark for R5F   </td></tr>
<tr>
<td>R5F Core 3 (rf5ss1-1) </td><td>Field Oriented Control (FOC) benchmark  </td><td>16 Khz execution loop </td><td>CMSIS FOC benchmark for R5F  </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md874"></a>
Supported Combinations</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter  </th><th class="markdownTableHeadNone">Value   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone" rowspan="4">CPU + OS  </td><td class="markdownTableBodyNone">r5fss0-0 nortos   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">r5fss0-1 nortos   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">r5fss1-0 nortos   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">r5fss1-1 nortos   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Toolchain  </td><td class="markdownTableBodyNone">ti-arm-clang   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Board  </td><td class="markdownTableBodyNone">am64x-evm   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Example folder  </td><td class="markdownTableBodyNone">examples/motor_control/benchmark_demo/   </td></tr>
</table>
<h1><a class="anchor" id="STEPS"></a>
Steps to Run the Example</h1>
<h2><a class="anchor" id="autotoc_md875"></a>
Hardware Prerequisites</h2>
<p>Other than the basic EVM setup mentioned in <a class="el" href="EVM_SETUP_PAGE.html">EVM Setup</a>, below additional HW is required to run this demo</p><ul>
<li>PC with a web browser and wired ethernet connectivity (Windows or Linux)</li>
<li>Ethernet cables</li>
<li>Ethernet switch or ethernet router with DHCP service</li>
<li>SD card (minimum 2GB)</li>
</ul>
<h2><a class="anchor" id="autotoc_md876"></a>
Build the R5F side projects</h2>
<dl class="section note"><dt>Note</dt><dd>The default <b>Processor SDK Linux</b> has prebuilt applications already, so this step can be skipped unless you have modified the demo application on R5F.</dd>
<dd>
This is a <code>system</code> or multi-core project, so refer to system project build instructions for CCS project or makefiles when building the example.</dd></dl>
<ul>
<li><b>When using CCS projects to build</b>, import the system CCS project and build it using the CCS project menu (see <a class="el" href="CCS_PROJECTS_PAGE.html">Using SDK with CCS Projects</a>). This will build all the dependant CPU projects as well</li>
<li><b>When using makefiles to build</b>, build the system makefile using make command (see <a class="el" href="MAKEFILE_BUILD_PAGE.html">Using SDK with Makefiles</a>). This will build all the dependant CPU makefiles as well.</li>
<li>After the build is complete the copy the below files to the SD card containing Linux filesystem in folder <code>/lib/firmware</code>. <div class="fragment"><div class="line">{system project output folder}/am64-main-r5f0_0-fw</div>
<div class="line">{system project output folder}/am64-main-r5f0_1-fw</div>
<div class="line">{system project output folder}/am64-main-r5f1_0-fw</div>
<div class="line">{system project output folder}/am64-main-r5f1_1-fw</div>
<div class="line"> </div>
<div class="line">When using makefiles to build, &quot;system project output folder&quot;, is</div>
<div class="line">${SDK_INSTALL_PATH}/examples/motor_control/benchmark_demo/{board}/system_nortos</div>
<div class="line"> </div>
<div class="line">When using CCS projects to build, &quot;system project output folder&quot;, is</div>
<div class="line">${CCS_WORKSPACE_PATH}/benchmark_demo_{board}_system_nortos/{Debug or Release}</div>
</div><!-- fragment --></li>
<li><b>NOTE</b>, the copy step can only be done using a Linux machine since the Linux filesystem on the SD card cannot be seen on a Windows machine.</li>
</ul>
<h2><a class="anchor" id="autotoc_md877"></a>
Run the demo</h2>
<ul>
<li>To run this demo, Linux needs to run on the Cortex A-core.<ul>
<li>This typically involves flashing a prebuilt Linux filesystem (<code>.wic</code> file) to the SD card</li>
<li>Refer to <b>Processor SDK Linux</b> user guide to setup Linux on Cortex-A core.</li>
</ul>
</li>
<li>Keep the EVM in <b>POWER-OFF</b> state.</li>
<li>Insert the SD card with Linux filesystem onto the EVM</li>
<li>Set the EVM boot mode to "SD boot mode"</li>
</ul>
<p> <style>div.image img[src="boot_pins_sd_mode_oob.png"]{width:50%}</style> </p><div class="image">
<img src="boot_pins_sd_mode_oob.png" alt=""/>
<div class="caption">
SD BOOT MODE</div></div>
<ul>
<li>Connect an ethernet cable from your ethernet switch or router to the EVM</li>
<li>Connect your PC to the same ethernet switch or router</li>
<li>Identify and setup a UART terminal console as mentioned in <a class="el" href="EVM_SETUP_PAGE.html#CCS_UART_TERMINAL">Setup UART Terminal</a></li>
<li><b>POWER-ON</b> the EVM.</li>
<li>After the Linux boot completes, login as "root", then type in "ifconfig" in Linux prompt to find out the IP address for the EVM</li>
</ul>
<p> <style>div.image img[src="OOB_Linux_ifconfig.png"]{width:40%}</style> </p><div class="image">
<img src="OOB_Linux_ifconfig.png" alt=""/>
</div>
<ul>
<li>On the PC, open a Internet Browser and enter in below in the address bar, <div class="fragment"><div class="line">http://{IP address of the EVM}:8081</div>
<div class="line"> </div>
<div class="line">Example,</div>
<div class="line">http://192.168.86.198:8081</div>
</div><!-- fragment --></li>
<li>The following web page will show in the browser,</li>
</ul>
<p> <style>div.image img[src="OOB_GUI_root.png"]{width:50%}</style> </p><div class="image">
<img src="OOB_GUI_root.png" alt=""/>
</div>
<ul>
<li>Click on the "Benchmark Demo",</li>
</ul>
<p> <style>div.image img[src="OOB_GUI_stats.png"]{width:70%}</style> </p><div class="image">
<img src="OOB_GUI_stats.png" alt=""/>
</div>
<ul>
<li>The R5F application for each core is fixed. User can change the <code>Options</code> for each core, then click <code>LOAD</code> to refresh the statistics</li>
</ul>
<h1><a class="anchor" id="autotoc_md878"></a>
Sample Output</h1>
<p>Shown below is a sample output when the application is run.</p>
<p> <style>div.image img[src="OOB_GUI_stats.png"]{width:70%}</style> </p><div class="image">
<img src="OOB_GUI_stats.png" alt=""/>
</div>
<h1><a class="anchor" id="autotoc_md879"></a>
Benchmark Results</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">CORE  </th><th class="markdownTableHeadNone">CMSIS Application  </th><th class="markdownTableHeadNone">CPU Usage(Avg)  </th><th class="markdownTableHeadNone">Interrupt Latency (ns)(Avg)  </th><th class="markdownTableHeadNone">Cycle Counter per loop(Avg)   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone" rowspan="4">R5FSS0_1  </td><td class="markdownTableBodyNone">CFFT(128pt)  </td><td class="markdownTableBodyNone">0  </td><td class="markdownTableBodyNone">358  </td><td class="markdownTableBodyNone">7878   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CFFT(256pt)  </td><td class="markdownTableBodyNone">2  </td><td class="markdownTableBodyNone">393  </td><td class="markdownTableBodyNone">18374   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CFFT(512pt)  </td><td class="markdownTableBodyNone">4  </td><td class="markdownTableBodyNone">850  </td><td class="markdownTableBodyNone">34633   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CFFT(1024pt)  </td><td class="markdownTableBodyNone">13  </td><td class="markdownTableBodyNone">1027  </td><td class="markdownTableBodyNone">105388   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone" rowspan="4">R5FSS1_0  </td><td class="markdownTableBodyNone">FIR(1KHz)  </td><td class="markdownTableBodyNone">3  </td><td class="markdownTableBodyNone">160  </td><td class="markdownTableBodyNone">26942   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FIR(2KHz)  </td><td class="markdownTableBodyNone">6  </td><td class="markdownTableBodyNone">204  </td><td class="markdownTableBodyNone">26981   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FIR(4KHz)  </td><td class="markdownTableBodyNone">13  </td><td class="markdownTableBodyNone">166  </td><td class="markdownTableBodyNone">26965   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FIR(8KHz)  </td><td class="markdownTableBodyNone">26  </td><td class="markdownTableBodyNone">202  </td><td class="markdownTableBodyNone">26994   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone" rowspan="4">R5FSS1_1  </td><td class="markdownTableBodyNone">FOC(16KHz)  </td><td class="markdownTableBodyNone">0  </td><td class="markdownTableBodyNone">202  </td><td class="markdownTableBodyNone">316   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FOC(32KHz)  </td><td class="markdownTableBodyNone">1  </td><td class="markdownTableBodyNone">164  </td><td class="markdownTableBodyNone">318   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FOC(100KHz)  </td><td class="markdownTableBodyNone">3  </td><td class="markdownTableBodyNone">174  </td><td class="markdownTableBodyNone">314   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FOC(250KHz)  </td><td class="markdownTableBodyNone">10  </td><td class="markdownTableBodyNone">199  </td><td class="markdownTableBodyNone">315   </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
