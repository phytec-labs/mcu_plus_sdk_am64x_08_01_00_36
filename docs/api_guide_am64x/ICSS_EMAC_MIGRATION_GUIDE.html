<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM64x MCU+ SDK: ICSS-EMAC Migration Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM64x MCU+ SDK
   &#160;<span id="projectnumber">08.01.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('ICSS_EMAC_MIGRATION_GUIDE.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ICSS-EMAC Migration Guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_migration_guides_icss_emac_migration_guide"></a> This list describes the differences between ICSS-EMAC driver of MCU+ SDK and ICSS-EMAC driver from the PDK.</p>
<h1><a class="anchor" id="autotoc_md264"></a>
API changes</h1>
<p>There are changes in API names, structure names and macro names. All names begin with <code>ICSS_EMAC_</code> now. In PDK driver, user had to include multiple header files from the driver. In MCU+ SDK, only a single include file is needed, which is <code>${SDK_INSTALL_PATH}/source/networking/icss_emac/icss_emac.h</code>. From the user point of view, IOCTL, Rx and Tx related API usage is same as in PDK. The initialization code for icss-emac has changed, and is described in the points below. All the APIs from PDK driver are not included, only the ones used in the networking libraries are added in the MCU+ SDK's driver. The changes in API names are listed below.</p>
<table class="doxtable">
<tr>
<th>PDK </th><th>MCU+ SDK  </th></tr>
<tr>
<td>Not available </td><td><a class="el" href="group__NETWORKING__ICSS__EMAC__MODULE.html#ga10787430905b6c3359d7a4d3fff3b797">ICSS_EMAC_init</a>  </td></tr>
<tr>
<td>Not available </td><td><a class="el" href="group__NETWORKING__ICSS__EMAC__MODULE.html#gad579cf7f825606261c2d53d93de3c3cf">ICSS_EMAC_deinit</a>  </td></tr>
<tr>
<td>Not available </td><td><a class="el" href="group__NETWORKING__ICSS__EMAC__MODULE.html#gaf08e745caf9f79d4373536de1d4d3ba5">ICSS_EMAC_Params_init</a>  </td></tr>
<tr>
<td>ICSS_EmacInit </td><td><a class="el" href="group__NETWORKING__ICSS__EMAC__MODULE.html#ga3dfa23ace97b9812cbc71184186b8e52">ICSS_EMAC_open</a>  </td></tr>
<tr>
<td>ICSS_EmacDeInit </td><td><a class="el" href="group__NETWORKING__ICSS__EMAC__MODULE.html#ga4aaf48a069f12d80294fdd5159fca203">ICSS_EMAC_close</a>  </td></tr>
<tr>
<td>ICSS_EmacIoctl </td><td><a class="el" href="group__NETWORKING__ICSS__EMAC__MODULE.html#ga7d6c646018a797be02688b661d62f31c">ICSS_EMAC_ioctl</a>  </td></tr>
<tr>
<td>ICSS_EmacRxPktGet </td><td><a class="el" href="group__NETWORKING__ICSS__EMAC__MODULE.html#ga6a5967f060e14a11d20eea9cd8b66e5f">ICSS_EMAC_rxPktGet</a>  </td></tr>
<tr>
<td>ICSS_EmacRxPktInfo </td><td><a class="el" href="group__NETWORKING__ICSS__EMAC__MODULE.html#gabf7e27aeb2dd4e42638b8ab8e20ecdd6">ICSS_EMAC_rxPktInfo</a>  </td></tr>
<tr>
<td>ICSS_EmacTxPacket </td><td><a class="el" href="group__NETWORKING__ICSS__EMAC__MODULE.html#ga49a2a061f6f24145004053b005f6e1a5">ICSS_EMAC_txPacket</a>  </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md265"></a>
Important Notes</h1>
<ul>
<li>In PDK, for initializing the handle for icss-emac, user had to manually perform dynamic allocation of memory needed for the icss-emac internal object. In MCU+ SDK, all allocation is static and user does not have to worry about memory allocation. <a class="el" href="structICSS__EMAC__Params.html">ICSS_EMAC_Params</a> should be filled before making the <a class="el" href="group__NETWORKING__ICSS__EMAC__MODULE.html#ga3dfa23ace97b9812cbc71184186b8e52">ICSS_EMAC_open</a> function call to get the handle, which will be used for subsequent API calls.</li>
<li>In PDK, there were APIs to register few callback functions, but now those are consolidated in the <a class="el" href="structICSS__EMAC__Params.html">ICSS_EMAC_Params</a> and should be provided during the <a class="el" href="group__NETWORKING__ICSS__EMAC__MODULE.html#ga3dfa23ace97b9812cbc71184186b8e52">ICSS_EMAC_open</a>, if relevant.</li>
<li>From PDK driver, the <code>ICSS_EMAC_Object</code> structure was used directly by user to get or set some information. Now the structure is opaque to user and can not be modified by the user.</li>
<li><code>ICSS_EmacRxPktInfo2</code> and <code>ICSS_EmacTxPacketEnqueue</code> APIs are not available for use. These APIs are used internally by <a class="el" href="group__NETWORKING__ICSS__EMAC__MODULE.html#gabf7e27aeb2dd4e42638b8ab8e20ecdd6">ICSS_EMAC_rxPktInfo</a> and <a class="el" href="group__NETWORKING__ICSS__EMAC__MODULE.html#ga49a2a061f6f24145004053b005f6e1a5">ICSS_EMAC_txPacket</a>. The recommendation is to use <a class="el" href="group__NETWORKING__ICSS__EMAC__MODULE.html#gabf7e27aeb2dd4e42638b8ab8e20ecdd6">ICSS_EMAC_rxPktInfo</a> and <a class="el" href="group__NETWORKING__ICSS__EMAC__MODULE.html#ga49a2a061f6f24145004053b005f6e1a5">ICSS_EMAC_txPacket</a> directly.</li>
<li>There are differences in TI-RTOS OSAL of PDK, and <a class="el" href="KERNEL_DPL_PAGE.html">Driver Porting Layer (DPL)</a> in MCU+ SDK. Changes were made to address this difference. Task, Semaphore and Hwi abstraction is similar to that in TI-RTOS osal. For task, the stack needs to be statically allocated. The stack size is 8KB for all tasks, and it will need tuning as needed in future. There is no impact on the use of APIs.</li>
<li>HWI creation for Link, Rx and Tx is done inside the driver. In PDK, the interrupt creation duty was with the user, but now the user can just give the host interrupt number to be configured and the driver takes care of creating HWI and assigning the interrupt handler internally.</li>
<li>Task creation for Link, Rx and Tx is done inside the driver. In PDK, the user had to create tasks with the functions provided by icss-emac. Now the tasks are created from the driver, and user can provide the task priority for each task as an input.</li>
<li>icss-emac needs information about the memory map of firmware which will be used with the icss-emac. User needs to provide the same information in the form of <a class="el" href="structICSS__EMAC__FwStaticMmap.html">ICSS_EMAC_FwStaticMmap</a> and <a class="el" href="structICSS__EMAC__FwDynamicMmap.html">ICSS_EMAC_FwDynamicMmap</a> while filling the <a class="el" href="structICSS__EMAC__Params.html">ICSS_EMAC_Params</a> structure. There are some other macros related to VLAN filtering and multicast filtering as well needed by icss-emac, for which should new structures are added and they should be passed if IOCTL for VLAN and multicast filtering are going to be called.</li>
<li><code>ICSS_EmacBaseAddressHandle_T</code> is removed now. It was replicating the information present in <a class="el" href="structPRUICSS__HwAttrs.html">PRUICSS_HwAttrs</a>, so that is used directly wherever needed.</li>
<li>Macros for HW register access like <code>HWREG</code>, <code>HWREGH</code> and <code>HWREGB</code> are deprecated from CSL in MCU+ SDK. They are replaced with the recommended replacements from <code>${SDK_INSTALL_PATH}/source/drivers/hw_include/hw_types.h</code>.</li>
<li>TTS (Time-triggered Send) related functionality is not available in MCU+ SDK driver.</li>
<li>Firmware Learning mode is not available in MCU+ SDK driver.</li>
<li>Time based Interrupt Pacing support is not available in MCU+ SDK driver.</li>
</ul>
<h1><a class="anchor" id="autotoc_md266"></a>
See Also</h1>
<p><a class="el" href="group__NETWORKING__ICSS__EMAC__MODULE.html">APIs for ICSS-EMAC</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
