<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM64x MCU+ SDK: Cycle Counter</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM64x MCU+ SDK
   &#160;<span id="projectnumber">08.01.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('KERNEL_DPL_CYCLE_COUNTER_PAGE.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Cycle Counter </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md395">Features Supported</a></li>
<li class="level1"><a href="#autotoc_md396">Features NOT Supported</a></li>
<li class="level1"><a href="#autotoc_md397">Important Usage Guidelines</a></li>
<li class="level1"><a href="#autotoc_md398">Example Usage</a></li>
<li class="level1"><a href="#autotoc_md399">API</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_components_kernel_dpl_CycleCountP"></a></p>
<h1><a class="anchor" id="autotoc_md395"></a>
Features Supported</h1>
<ul>
<li>API to return CPU cycles executed so far</li>
<li>API to reset the CPU cycle counter</li>
</ul>
<h1><a class="anchor" id="autotoc_md396"></a>
Features NOT Supported</h1>
<ul>
<li>Additional event counters in the CPU are not supported via this API. Refer to CPU architecture specific technical and architecture reference manuals, to access additional CPU architecture specific counter features.</li>
</ul>
<h1><a class="anchor" id="autotoc_md397"></a>
Important Usage Guidelines</h1>
<ul>
<li>Make sure to call <a class="el" href="group__KERNEL__DPL__CYCLE__COUNTER.html#ga12544e8e8cedd5547c1e1ae418b9ba8f" title="Enable, reset, clear overflow for CPU cycle counter.">CycleCounterP_reset()</a> to enable and reset the CPU cycle counter before using it</li>
<li><a class="el" href="group__KERNEL__DPL__CYCLE__COUNTER.html#gaddd83780d290b681ce00138bff818f59" title="Get 32b CPU cycle counter value.">CycleCounterP_getCount32()</a> uses a CPU architecture specific counter to count every CPU cycle. Since this is a 32b counter, this will typically wraparound and overflow within few seconds. E.g. for 500Mhz CPU, the counter will overflow in ~ 8secs.</li>
<li>Application can have logic to handle one wraparound of the counter, as shown in the example usage below. i.e max time duration that can be measured will be limited to 0xFFFFFFFF CPU cycles, i.e few seconds only.</li>
<li>This API is meant to used for very fine, short duration measurements. To measure longer durations use <a class="el" href="group__KERNEL__DPL__CLOCK.html#ga7e8e4791754ece82b27b152d754638ca">ClockP_getTimeUsec()</a> from <a class="el" href="KERNEL_DPL_CLOCK_PAGE.html">Clock</a> module.</li>
</ul>
<h1><a class="anchor" id="autotoc_md398"></a>
Example Usage</h1>
<p>Include the below file to access the APIs, </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="CycleCounterP_8h.html">kernel/dpl/CycleCounterP.h</a>&gt;</span></div>
</div><!-- fragment --><p> Example usage for counting CPU cycles, </p><div class="fragment"><div class="line">        uint32_t cycleCountBefore, cycleCountAfter, cpuCycles;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* enable and reset CPU cycle coutner */</span></div>
<div class="line">        <a class="code" href="group__KERNEL__DPL__CYCLE__COUNTER.html#ga12544e8e8cedd5547c1e1ae418b9ba8f">CycleCounterP_reset</a>();</div>
<div class="line"> </div>
<div class="line">        cycleCountBefore = <a class="code" href="group__KERNEL__DPL__CYCLE__COUNTER.html#gaddd83780d290b681ce00138bff818f59">CycleCounterP_getCount32</a>();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* call functions to profile */</span></div>
<div class="line"> </div>
<div class="line">        cycleCountAfter = <a class="code" href="group__KERNEL__DPL__CYCLE__COUNTER.html#gaddd83780d290b681ce00138bff818f59">CycleCounterP_getCount32</a>();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Check for overflow and wrap around. </span></div>
<div class="line"><span class="comment">         *</span></div>
<div class="line"><span class="comment">         * This logic will only work for one overflow.</span></div>
<div class="line"><span class="comment">         * If multiple overflows happen during the profile period, </span></div>
<div class="line"><span class="comment">         * then CPU cycles count will be wrong, </span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">        <span class="keywordflow">if</span>(cycleCountAfter &gt; cycleCountBefore)</div>
<div class="line">        {</div>
<div class="line">            cpuCycles = cycleCountAfter - cycleCountBefore;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            cpuCycles = (0xFFFFFFFFU - cycleCountBefore) + cycleCountAfter;</div>
<div class="line">        }</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md399"></a>
API</h1>
<p><a class="el" href="group__KERNEL__DPL__CYCLE__COUNTER.html">APIs for Counting CPU Cycles</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="agroup__KERNEL__DPL__CYCLE__COUNTER_html_gaddd83780d290b681ce00138bff818f59"><div class="ttname"><a href="group__KERNEL__DPL__CYCLE__COUNTER.html#gaddd83780d290b681ce00138bff818f59">CycleCounterP_getCount32</a></div><div class="ttdeci">uint32_t CycleCounterP_getCount32()</div><div class="ttdoc">Get 32b CPU cycle counter value.</div></div>
<div class="ttc" id="aCycleCounterP_8h_html"><div class="ttname"><a href="CycleCounterP_8h.html">CycleCounterP.h</a></div></div>
<div class="ttc" id="agroup__KERNEL__DPL__CYCLE__COUNTER_html_ga12544e8e8cedd5547c1e1ae418b9ba8f"><div class="ttname"><a href="group__KERNEL__DPL__CYCLE__COUNTER.html#ga12544e8e8cedd5547c1e1ae418b9ba8f">CycleCounterP_reset</a></div><div class="ttdeci">void CycleCounterP_reset()</div><div class="ttdoc">Enable, reset, clear overflow for CPU cycle counter.</div></div>
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
