<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM64x MCU+ SDK: MMU for ARMv8 (ARM A53)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM64x MCU+ SDK
   &#160;<span id="projectnumber">08.01.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('KERNEL_DPL_MMU_ARMV8_PAGE.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">MMU for ARMv8 (ARM A53) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md411">Features Supported</a></li>
<li class="level1"><a href="#autotoc_md412">Features NOT Supported</a></li>
<li class="level1"><a href="#autotoc_md413">Important Usage Guidelines</a></li>
<li class="level1"><a href="#autotoc_md414">Example Usage</a></li>
<li class="level1"><a href="#autotoc_md415">API</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_components_kernel_dpl_MmuP_arm_v8"></a></p>
<h1><a class="anchor" id="autotoc_md411"></a>
Features Supported</h1>
<ul>
<li>APIs to setup MMU regions, including region address, size, attributes like access permissions, cache properties</li>
<li>APIs to enable, disable MMU</li>
<li>API to check if MMU is enabled</li>
</ul>
<h1><a class="anchor" id="autotoc_md412"></a>
Features NOT Supported</h1>
<p>NA</p>
<h1><a class="anchor" id="autotoc_md413"></a>
Important Usage Guidelines</h1>
<ul>
<li>MMU regions can overlap each other, with higher numbered regions taking more precedence in case of address overlaps.</li>
</ul>
<h1><a class="anchor" id="autotoc_md414"></a>
Example Usage</h1>
<p>Include the below file to access the APIs, </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="CacheP_8h.html">kernel/dpl/CacheP.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="MmuP__armv8_8h.html">kernel/dpl/MmuP_armv8.h</a>&gt;</span></div>
</div><!-- fragment --><p> Example to setup MMU regions and enable MMU is shown below, </p><div class="fragment"><div class="line"> </div>
<div class="line">    <a class="code" href="structMmuP__MapAttrs.html">MmuP_MapAttrs</a> mapAttrs;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* recommend to disable Cache and MMU before setting up MMU regions */</span></div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__CACHE.html#gaaaf9860720bfea8c3fa0e795b5e12a24">CacheP_disable</a>(<a class="code" href="group__KERNEL__DPL__CACHE.html#ggab8295dda8ae672ab4e314e51292de1fbadbcd63274b569051fa80b3526ef04ae7">CacheP_TYPE_ALL</a>);</div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__MMU__ARMV8.html#gaa5a65065b88b83bf582af09455c3c59e">MmuP_disable</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* make 4G region as privileged executable, outer shareable */</span></div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__MMU__ARMV8.html#gae7c852abda107091dfe2dddf283778bc">MmuP_MapAttrs_init</a>(&amp;mapAttrs);</div>
<div class="line">    mapAttrs.<a class="code" href="structMmuP__MapAttrs.html#a6e931f9b7c677fcc62ac51a7a7f667dd">accessPerm</a> = <a class="code" href="group__KERNEL__DPL__MMU__ARMV8.html#gga1db7437196e81f2219cc3c1f602aaf0ea5041e5fc0fac890f918efe80d40bae47">MMUP_ACCESS_PERM_PRIV_RW_USER_NONE</a>;</div>
<div class="line">    mapAttrs.<a class="code" href="structMmuP__MapAttrs.html#afa41c844a16cafd6edef99b025214b61">privExecute</a> = 1;</div>
<div class="line">    mapAttrs.<a class="code" href="structMmuP__MapAttrs.html#a84a5ae3bb2ca89c2560ea601d3c3fc2d">userExecute</a> = 0;</div>
<div class="line">    mapAttrs.<a class="code" href="structMmuP__MapAttrs.html#a1b343694ff8363b3fbba235622c2df4f">shareable</a> = <a class="code" href="group__KERNEL__DPL__MMU__ARMV8.html#ggae39777cccc99ac35e6aec3938a121df1ab6189064a5760db086336d1b3ec72096">MMUP_SHARABLE_OUTER</a>,</div>
<div class="line">    mapAttrs.<a class="code" href="structMmuP__MapAttrs.html#abfba7461e134a18d6a65986f06c9ea1b">attrIndx</a> = <a class="code" href="group__KERNEL__DPL__MMU__ARMV8.html#gga11d032781a51322c950e154b51199275a7610f674519c21e5e9f61fba051b4d5a">MMUP_ATTRINDX_MAIR0</a>;</div>
<div class="line">    mapAttrs.<a class="code" href="structMmuP__MapAttrs.html#a90b759411b3b87ca8e920d36b29c6ace">global</a> = 1;</div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__MMU__ARMV8.html#ga694ae60c540f7167aad732cac636d54a">MmuP_map</a>(0x0u, 0x0u, 0x80000000u, &amp;mapAttrs);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* make memory region as outer and inner writeback cacheable */</span></div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__MMU__ARMV8.html#gae7c852abda107091dfe2dddf283778bc">MmuP_MapAttrs_init</a>(&amp;mapAttrs);</div>
<div class="line">    mapAttrs.<a class="code" href="structMmuP__MapAttrs.html#a6e931f9b7c677fcc62ac51a7a7f667dd">accessPerm</a> = <a class="code" href="group__KERNEL__DPL__MMU__ARMV8.html#gga1db7437196e81f2219cc3c1f602aaf0ea5041e5fc0fac890f918efe80d40bae47">MMUP_ACCESS_PERM_PRIV_RW_USER_NONE</a>;</div>
<div class="line">    mapAttrs.<a class="code" href="structMmuP__MapAttrs.html#afa41c844a16cafd6edef99b025214b61">privExecute</a> = 1;</div>
<div class="line">    mapAttrs.<a class="code" href="structMmuP__MapAttrs.html#a84a5ae3bb2ca89c2560ea601d3c3fc2d">userExecute</a> = 0;</div>
<div class="line">    mapAttrs.<a class="code" href="structMmuP__MapAttrs.html#a1b343694ff8363b3fbba235622c2df4f">shareable</a> = <a class="code" href="group__KERNEL__DPL__MMU__ARMV8.html#ggae39777cccc99ac35e6aec3938a121df1ab6189064a5760db086336d1b3ec72096">MMUP_SHARABLE_OUTER</a>,</div>
<div class="line">    mapAttrs.<a class="code" href="structMmuP__MapAttrs.html#abfba7461e134a18d6a65986f06c9ea1b">attrIndx</a> = <a class="code" href="group__KERNEL__DPL__MMU__ARMV8.html#gga11d032781a51322c950e154b51199275a4c57bcf10c8cbe6ee2d9b81446f205b2">MMUP_ATTRINDX_MAIR7</a>;</div>
<div class="line">    mapAttrs.<a class="code" href="structMmuP__MapAttrs.html#a90b759411b3b87ca8e920d36b29c6ace">global</a> = 1;</div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__MMU__ARMV8.html#ga694ae60c540f7167aad732cac636d54a">MmuP_map</a>(0x80000000u, 0x80000000u, 0x80000000u, &amp;mapAttrs);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* enable Cache and MPU after setting up MPU regions */</span></div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__MMU__ARMV8.html#ga606bcb8e4362806206d08ba2f55bc706">MmuP_enable</a>();</div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__CACHE.html#gaca2cab801bb5e7b72e1605367ad71808">CacheP_enable</a>(<a class="code" href="group__KERNEL__DPL__CACHE.html#ggab8295dda8ae672ab4e314e51292de1fbadbcd63274b569051fa80b3526ef04ae7">CacheP_TYPE_ALL</a>);</div>
<div class="line"> </div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md415"></a>
API</h1>
<p><a class="el" href="group__KERNEL__DPL__MMU__ARMV8.html">APIs for MMU for ARMv8 (ARM A53)</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="agroup__KERNEL__DPL__CACHE_html_gaca2cab801bb5e7b72e1605367ad71808"><div class="ttname"><a href="group__KERNEL__DPL__CACHE.html#gaca2cab801bb5e7b72e1605367ad71808">CacheP_enable</a></div><div class="ttdeci">void CacheP_enable(uint32_t type)</div><div class="ttdoc">Cache enable.</div></div>
<div class="ttc" id="astructMmuP__MapAttrs_html_a6e931f9b7c677fcc62ac51a7a7f667dd"><div class="ttname"><a href="structMmuP__MapAttrs.html#a6e931f9b7c677fcc62ac51a7a7f667dd">MmuP_MapAttrs::accessPerm</a></div><div class="ttdeci">MmuP_AccessPerm accessPerm</div><div class="ttdef"><b>Definition:</b> MmuP_armv8.h:93</div></div>
<div class="ttc" id="agroup__KERNEL__DPL__MMU__ARMV8_html_gga11d032781a51322c950e154b51199275a7610f674519c21e5e9f61fba051b4d5a"><div class="ttname"><a href="group__KERNEL__DPL__MMU__ARMV8.html#gga11d032781a51322c950e154b51199275a7610f674519c21e5e9f61fba051b4d5a">MMUP_ATTRINDX_MAIR0</a></div><div class="ttdeci">@ MMUP_ATTRINDX_MAIR0</div><div class="ttdef"><b>Definition:</b> MmuP_armv8.h:76</div></div>
<div class="ttc" id="agroup__KERNEL__DPL__CACHE_html_gaaaf9860720bfea8c3fa0e795b5e12a24"><div class="ttname"><a href="group__KERNEL__DPL__CACHE.html#gaaaf9860720bfea8c3fa0e795b5e12a24">CacheP_disable</a></div><div class="ttdeci">void CacheP_disable(uint32_t type)</div><div class="ttdoc">Cache disable.</div></div>
<div class="ttc" id="aMmuP__armv8_8h_html"><div class="ttname"><a href="MmuP__armv8_8h.html">MmuP_armv8.h</a></div></div>
<div class="ttc" id="astructMmuP__MapAttrs_html_a84a5ae3bb2ca89c2560ea601d3c3fc2d"><div class="ttname"><a href="structMmuP__MapAttrs.html#a84a5ae3bb2ca89c2560ea601d3c3fc2d">MmuP_MapAttrs::userExecute</a></div><div class="ttdeci">uint8_t userExecute</div><div class="ttdef"><b>Definition:</b> MmuP_armv8.h:95</div></div>
<div class="ttc" id="astructMmuP__MapAttrs_html"><div class="ttname"><a href="structMmuP__MapAttrs.html">MmuP_MapAttrs</a></div><div class="ttdoc">Attribute's to apply for a MMU region.</div><div class="ttdef"><b>Definition:</b> MmuP_armv8.h:92</div></div>
<div class="ttc" id="agroup__KERNEL__DPL__MMU__ARMV8_html_ga606bcb8e4362806206d08ba2f55bc706"><div class="ttname"><a href="group__KERNEL__DPL__MMU__ARMV8.html#ga606bcb8e4362806206d08ba2f55bc706">MmuP_enable</a></div><div class="ttdeci">void MmuP_enable()</div><div class="ttdoc">Enable MMU sub-system.</div></div>
<div class="ttc" id="agroup__KERNEL__DPL__MMU__ARMV8_html_gga11d032781a51322c950e154b51199275a4c57bcf10c8cbe6ee2d9b81446f205b2"><div class="ttname"><a href="group__KERNEL__DPL__MMU__ARMV8.html#gga11d032781a51322c950e154b51199275a4c57bcf10c8cbe6ee2d9b81446f205b2">MMUP_ATTRINDX_MAIR7</a></div><div class="ttdeci">@ MMUP_ATTRINDX_MAIR7</div><div class="ttdef"><b>Definition:</b> MmuP_armv8.h:83</div></div>
<div class="ttc" id="agroup__KERNEL__DPL__MMU__ARMV8_html_gga1db7437196e81f2219cc3c1f602aaf0ea5041e5fc0fac890f918efe80d40bae47"><div class="ttname"><a href="group__KERNEL__DPL__MMU__ARMV8.html#gga1db7437196e81f2219cc3c1f602aaf0ea5041e5fc0fac890f918efe80d40bae47">MMUP_ACCESS_PERM_PRIV_RW_USER_NONE</a></div><div class="ttdeci">@ MMUP_ACCESS_PERM_PRIV_RW_USER_NONE</div><div class="ttdef"><b>Definition:</b> MmuP_armv8.h:57</div></div>
<div class="ttc" id="astructMmuP__MapAttrs_html_abfba7461e134a18d6a65986f06c9ea1b"><div class="ttname"><a href="structMmuP__MapAttrs.html#abfba7461e134a18d6a65986f06c9ea1b">MmuP_MapAttrs::attrIndx</a></div><div class="ttdeci">MmuP_AttrIndx attrIndx</div><div class="ttdef"><b>Definition:</b> MmuP_armv8.h:97</div></div>
<div class="ttc" id="agroup__KERNEL__DPL__MMU__ARMV8_html_gaa5a65065b88b83bf582af09455c3c59e"><div class="ttname"><a href="group__KERNEL__DPL__MMU__ARMV8.html#gaa5a65065b88b83bf582af09455c3c59e">MmuP_disable</a></div><div class="ttdeci">void MmuP_disable(void)</div><div class="ttdoc">Disable MMU sub-system.</div></div>
<div class="ttc" id="agroup__KERNEL__DPL__MMU__ARMV8_html_gae7c852abda107091dfe2dddf283778bc"><div class="ttname"><a href="group__KERNEL__DPL__MMU__ARMV8.html#gae7c852abda107091dfe2dddf283778bc">MmuP_MapAttrs_init</a></div><div class="ttdeci">void MmuP_MapAttrs_init(MmuP_MapAttrs *attrs)</div><div class="ttdoc">Set default values to MmuP_MapAttrs.</div></div>
<div class="ttc" id="aCacheP_8h_html"><div class="ttname"><a href="CacheP_8h.html">CacheP.h</a></div></div>
<div class="ttc" id="agroup__KERNEL__DPL__CACHE_html_ggab8295dda8ae672ab4e314e51292de1fbadbcd63274b569051fa80b3526ef04ae7"><div class="ttname"><a href="group__KERNEL__DPL__CACHE.html#ggab8295dda8ae672ab4e314e51292de1fbadbcd63274b569051fa80b3526ef04ae7">CacheP_TYPE_ALL</a></div><div class="ttdeci">@ CacheP_TYPE_ALL</div><div class="ttdef"><b>Definition:</b> CacheP.h:74</div></div>
<div class="ttc" id="astructMmuP__MapAttrs_html_a1b343694ff8363b3fbba235622c2df4f"><div class="ttname"><a href="structMmuP__MapAttrs.html#a1b343694ff8363b3fbba235622c2df4f">MmuP_MapAttrs::shareable</a></div><div class="ttdeci">MmuP_Shareable shareable</div><div class="ttdef"><b>Definition:</b> MmuP_armv8.h:96</div></div>
<div class="ttc" id="agroup__KERNEL__DPL__MMU__ARMV8_html_ggae39777cccc99ac35e6aec3938a121df1ab6189064a5760db086336d1b3ec72096"><div class="ttname"><a href="group__KERNEL__DPL__MMU__ARMV8.html#ggae39777cccc99ac35e6aec3938a121df1ab6189064a5760db086336d1b3ec72096">MMUP_SHARABLE_OUTER</a></div><div class="ttdeci">@ MMUP_SHARABLE_OUTER</div><div class="ttdef"><b>Definition:</b> MmuP_armv8.h:68</div></div>
<div class="ttc" id="astructMmuP__MapAttrs_html_a90b759411b3b87ca8e920d36b29c6ace"><div class="ttname"><a href="structMmuP__MapAttrs.html#a90b759411b3b87ca8e920d36b29c6ace">MmuP_MapAttrs::global</a></div><div class="ttdeci">uint8_t global</div><div class="ttdef"><b>Definition:</b> MmuP_armv8.h:98</div></div>
<div class="ttc" id="astructMmuP__MapAttrs_html_afa41c844a16cafd6edef99b025214b61"><div class="ttname"><a href="structMmuP__MapAttrs.html#afa41c844a16cafd6edef99b025214b61">MmuP_MapAttrs::privExecute</a></div><div class="ttdeci">uint8_t privExecute</div><div class="ttdef"><b>Definition:</b> MmuP_armv8.h:94</div></div>
<div class="ttc" id="agroup__KERNEL__DPL__MMU__ARMV8_html_ga694ae60c540f7167aad732cac636d54a"><div class="ttname"><a href="group__KERNEL__DPL__MMU__ARMV8.html#ga694ae60c540f7167aad732cac636d54a">MmuP_map</a></div><div class="ttdeci">int32_t MmuP_map(uintptr_t vaddr, uintptr_t paddr, uint32_t size, MmuP_MapAttrs *mapAttrs)</div><div class="ttdoc">Setup a region in the MMU.</div></div>
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
