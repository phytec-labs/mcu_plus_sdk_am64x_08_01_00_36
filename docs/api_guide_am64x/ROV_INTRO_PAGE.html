<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM64x MCU+ SDK: Using SDK with Real-time Object View (ROV)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM64x MCU+ SDK
   &#160;<span id="projectnumber">08.01.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('ROV_INTRO_PAGE.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Using SDK with Real-time Object View (ROV) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md230">Introduction</a></li>
<li class="level1"><a href="#autotoc_md231">Features Supported</a></li>
<li class="level1"><a href="#autotoc_md232">Features NOT Supported</a></li>
<li class="level1"><a href="#autotoc_md233">Using ROV with SDK examples</a></li>
<li class="level1"><a href="#autotoc_md234">Enabling ROV in your project</a></li>
<li class="level1"><a href="#autotoc_md235">Enabling ROV with makefile</a></li>
<li class="level1"><a href="#autotoc_md236">Important Usage Guidelines</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_developer_guides_ccs_rov"></a></p>
<dl class="section note"><dt>Note</dt><dd>The steps on this page show screen shots and description based on Windows. However the steps in Linux would remain the same, unless mentioned otherwise.</dd>
<dd>
The screen shots shown on this page are for AM64x MCU+ SDK v7.3.1. You would see your specific SOC and SDK version that is installed. However the instructions and steps mentioned remain the same, unless mentioned otherwise.</dd></dl>
<h1><a class="anchor" id="autotoc_md230"></a>
Introduction</h1>
<p>Real-time Object View (ROV) in CCS IDE allows user to view the state of a executing application via different easy to understand views. These views are generated by reading information from the running SW program using the JTAG debugger port.</p>
<p>This section explains,</p><ul>
<li>Using ROV with SDK examples</li>
<li>Enabling ROV in your project</li>
<li>Other important usage guidelines</li>
</ul>
<h1><a class="anchor" id="autotoc_md231"></a>
Features Supported</h1>
<p>Some of the supported ROV views are listed below</p><ul>
<li>View task state, including free stack size (only for FreeRTOS based application)</li>
<li>View semaphore, mutex state, including which task is blocked on a semaphore and which task is holding onto a mutex (only for FreeRTOS based application)</li>
<li>View SW timer state, including the callbacks that are registered, timer period (only for FreeRTOS based application)</li>
<li>View HW interrupt state, including the ISRs that are registered and interrupt numbers that have ISRs registered. (FreeRTOS, NORTOS)</li>
<li>View system heap and common stack information like ISR stack (FreeRTOS, NORTOS)</li>
<li>View logs logged to CPU local memory via <a class="el" href="KERNEL_DPL_DEBUG_PAGE.html">Debug</a> module in DPL.</li>
</ul>
<h1><a class="anchor" id="autotoc_md232"></a>
Features NOT Supported</h1>
<ul>
<li>NORTOS ROV views are limited to heap, stack, HW interrupts, memory logs.</li>
<li>ROV views for projects built using makefiles. ROV only works when the application is loaded and run via a CCS project</li>
</ul>
<h1><a class="anchor" id="autotoc_md233"></a>
Using ROV with SDK examples</h1>
<dl class="section attention"><dt>Attention</dt><dd>ROV only works when the application is loaded and run via a CCS project</dd></dl>
<ul>
<li>Make sure you are able to load and run SDK examples using CCS projects (see <a class="el" href="GETTING_STARTED.html">Getting Started</a>)</li>
<li><b>Halt the program</b> as shown below. This is important, since otherwise the JTAG debugger cannot read memory for the running CPU to get the state information that ROV needs.</li>
</ul>
<p> <style>div.image img[src="ccs_rov_02a.png"]{width:40%}</style> </p><div class="image">
<img src="ccs_rov_02a.png" alt=""/>
<div class="caption">
Halt the CPU</div></div>
<ul>
<li>To launch ROV views, click on <code>CCS Menu &gt; Tools &gt; Runtime Object View</code> as shown below</li>
</ul>
<p> <style>div.image img[src="ccs_rov_01.png"]{width:15%}</style> </p><div class="image">
<img src="ccs_rov_01.png" alt=""/>
<div class="caption">
Start ROV from CCS Menu</div></div>
<ul>
<li>Alternatively, you can click on the "ROV" button in the CCS toolbar as shown below</li>
</ul>
<p> <style>div.image img[src="ccs_rov_02.png"]{width:40%}</style> </p><div class="image">
<img src="ccs_rov_02.png" alt=""/>
<div class="caption">
Start ROV from CCS Toolbar</div></div>
<ul>
<li>You will see a ROV window in CCS as shown below, click on "CONNECT"</li>
</ul>
<p> <style>div.image img[src="ccs_rov_03.png"]{width:40%}</style> </p><div class="image">
<img src="ccs_rov_03.png" alt=""/>
<div class="caption">
ROV Window</div></div>
<ul>
<li>This will launch the ROV viewer as shown below</li>
</ul>
<p> <style>div.image img[src="ccs_rov_04.png"]{width:60%}</style> </p><div class="image">
<img src="ccs_rov_04.png" alt=""/>
<div class="caption">
ROV after its started</div></div>
<ul>
<li>You can click on various "Viewable Modules". In current SDK, "OS Kernel" is the one which has useful views</li>
<li>After clicking on "OS Kernel", click on the drop down to see all the supported ROV views</li>
</ul>
<p> <style>div.image img[src="ccs_rov_05.png"]{width:60%}</style> </p><div class="image">
<img src="ccs_rov_05.png" alt=""/>
<div class="caption">
ROV views</div></div>
<ul>
<li>Show below is a sample after "Task Instances" view is selected</li>
</ul>
<p> <style>div.image img[src="ccs_rov_06.png"]{width:60%}</style> </p><div class="image">
<img src="ccs_rov_06.png" alt=""/>
<div class="caption">
ROV task view</div></div>
<ul>
<li>You can click on the button below to launch a new view keeping the previous view still visible</li>
</ul>
<p> <style>div.image img[src="ccs_rov_07.png"]{width:10%}</style> </p><div class="image">
<img src="ccs_rov_07.png" alt=""/>
<div class="caption">
ROV new view</div></div>
<ul>
<li>Shown below is sample with many views shown in ROV</li>
</ul>
<p> <style>div.image img[src="ccs_rov_08.png"]{width:100%}</style> </p><div class="image">
<img src="ccs_rov_08.png" alt=""/>
<div class="caption">
ROV multiple active views</div></div>
<ul>
<li>You can run the halted program after you seen the state you want to see. After running for some time, to see updated state, simply halt the CPU again, the ROV window will show the updated state.</li>
</ul>
<h1><a class="anchor" id="autotoc_md234"></a>
Enabling ROV in your project</h1>
<ul>
<li>It is <b>HIGHLY recommended</b> to create your custom project using the <a class="el" href="EXAMPLES_EMPTY.html">Empty Project</a> included in the SDK. This will not only get you all the normal project settings you need for your project but will also enable ROV in your project</li>
<li>If you have created a project on your own then, make sure<ul>
<li>you add the file <code>examples\empty\{board}\{cpu_os}\{compiler}\syscfg_c.rov.xs</code> to your project. This file is independent of SOC, CPU, OS, compiler, so you can add this file to any of your project</li>
<li>and make sure your project points to MCU+ SDK as a dependant product. The ROV views are generated using the backend file <code>{SDK_INSTALL_PATH}\source\kernel\freertos\rov\FreeRTOS.rov.js</code> which is referenced by <code>syscfg_c.rov.xs</code>, hence the project needs to know the location of the SDK.</li>
</ul>
</li>
<li>When using CCS <code>projectspec</code>, the line below in the <code>.projectspec</code> file adds the SysConfig and AM64x MCU+ SDK as dependant products for example, <pre class="fragment">  products="sysconfig;com.ti.MCU_PLUS_SDK_AM64X"
</pre></li>
</ul>
<h1><a class="anchor" id="autotoc_md235"></a>
Enabling ROV with makefile</h1>
<ul>
<li>Makefile examples also use the <code>syscfg_c.rov.xs</code> and <code>FreeRTOS.rov.js</code> as described in above section. In addition to this user needs to set the XDCpath to <code>{SDK_INSTALL_PATH}</code> in CCS preferences to enable ROV. Please note that this setting needs to be done only once per CCS installation for a given SDK release.</li>
</ul>
<p> <style>div.image img[src="ccs_rov_09.png"]{width:60%}</style> </p><div class="image">
<img src="ccs_rov_09.png" alt=""/>
<div class="caption">
XDCpath addition for ROV</div></div>
<h1><a class="anchor" id="autotoc_md236"></a>
Important Usage Guidelines</h1>
<ul>
<li>You need to be connected via JTAG for ROV to read and display information from the loaded program.</li>
<li>The program needs to be in a halted state, else the JTAG debugger cannot read the SOC memory which it needs to update its views.</li>
<li>When you reload and run the program again OR you load and run a new program, you need to close current ROV window and launch ROV again.</li>
<li>Many of the FreeRTOS ROV views rely on certain FreeRTOS config to be enabled in order to show the information correctly. So if you are changing any of the below FreeRTOS config, the ROV views many NOT show all information correctly.<ul>
<li><code>configQUEUE_REGISTRY_SIZE</code> controls the maximum semaphores, queues, mutex's that can be viewed by ROV. If your semaphore, queue, mutex's count is more than this value then the additional objects wont be seen. In this case go and increase this value in the FreeRTOSConfig.h (<code>source\kernel\freertos\config\{soc}\{cpu}\FreeRTOSConfig.h</code>). Note, this only affect the objects seen in ROV view and has no effect on functionality of the created object in the program.</li>
<li><code>configUSE_TRACE_FACILITY</code> MUST be <code>1</code> for ROV to show estimated free stack size for tasks. This option writes a known pattern to the task stack and ROV then checks the point at which the pattern is overwritten to find the stack used so far by the task. If you disable <code>configUSE_TRACE_FACILITY</code>, the free stack size may show "STACK OVERFLOW", but you can ignore this since it is not able to find a known pattern at the top of stack and concludes its a stack overflow. The other task information displayed will still be correct.</li>
</ul>
</li>
<li>To make a semaphore, mutex or queue visible in ROV, you need to register the object using the below function else this object wont be visible in ROV <pre class="fragment">  vQueueAddToRegistry(gMySemHandle, "My object name");
</pre></li>
<li>To make FreeRTOS SW timer to be visible in ROV view, it needs to be started using below function. <pre class="fragment">  xTimerStart(gMyTimerHandle, portMAX_DELAY);
</pre></li>
<li>And when the SW timer is stopped on its own or is stopped via <code>xTimerStop</code>, it is no longer visible in the ROV views.</li>
<li>When using DPL Semaphore APIs, internally it calls <code>vQueueAddToRegistry</code> to register semaphore's and mutex's with a default name.</li>
<li>The free stack size shown for a task in ROV views, is a estimated value, and it should be used with care as listed below,<ul>
<li>To reduce the time needed to read the stack memory for a known pattern and compute the free stack size, the ROV logic reads 4 bytes every 128 bytes, this allows the stack free space computation to be fast but with a accuracy loss of 128 bytes at most.</li>
<li>In some cases, if the stack truly has the pattern to be checked for ( <code>0xa5a5a5a5</code> ), then ROV views may wrongly compute that 128 bytes stack chunk as "free" when really it is not free.</li>
</ul>
</li>
<li>If you have tasks with very large stacks or lot of tasks, then when task view is opened in ROV it may take a some time to compute the task stack size. In worst case, it may also timeout.</li>
<li>See <a class="el" href="KERNEL_DPL_DEBUG_PAGE.html">Debug</a> for more information on logging to memory. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
