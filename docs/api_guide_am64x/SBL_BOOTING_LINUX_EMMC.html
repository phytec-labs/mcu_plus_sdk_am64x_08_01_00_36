<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM64x MCU+ SDK: SBL Booting Linux From eMMC</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM64x MCU+ SDK
   &#160;<span id="projectnumber">08.01.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('SBL_BOOTING_LINUX_EMMC.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">SBL Booting Linux From eMMC </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md184">Introduction</a></li>
<li class="level1"><a href="#autotoc_md185">Features Supported</a></li>
<li class="level1"><a href="#autotoc_md186">Features NOT Supported</a></li>
<li class="level1"><a href="#autotoc_md187">Bootflow for SBL booting linux from eMMC</a></li>
<li class="level1"><a href="#autotoc_md188">SRAM memory layout for SBL booting Linux</a></li>
<li class="level1"><a href="#autotoc_md189">EMMC Partitioning</a></li>
<li class="level1"><a href="#autotoc_md190">See Also</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_developer_guides_sbl_booting_linux_emmc"></a></p>
<h1><a class="anchor" id="autotoc_md184"></a>
Introduction</h1>
<ul>
<li>SBL booting Linux from eMMC (see <a class="el" href="EXAMPLES_DRIVERS_SBL_EMMC_LINUX.html">SBL EMMC Linux</a>) is a secondary bootloader application that boots Linux on A53 core and RTOS/NORTOS application on R5, M4 cores.</li>
<li>The bootloader makes use of two appimages<ul>
<li>One containing the application images(RTOS/NORTOS) for R5, M4 cores.</li>
<li>Other containing the Linux binaries(ATF, OPTEE, SPL) for A53 core.</li>
</ul>
</li>
<li>The Linux appimage can be generated by using <a class="el" href="TOOLS_BOOT.html#LINUX_APPIMAGE_GEN_TOOL">Linux Appimage Generator Tool</a></li>
<li>The appimages will be flashed to the offset on eMMC specified by SysCfg, the SBL parses the appimages from these locations, loads and run the cores.</li>
</ul>
<h1><a class="anchor" id="autotoc_md185"></a>
Features Supported</h1>
<ul>
<li>Boots R5, M4 cores and Linux on A53 from eMMC.</li>
<li>SBL booting Linux can be used when early booting of R5 and M4 cores are required. When using uBoot to run R5 and M4 cores the application will start running on R5, M4 cores only after booting Linux</li>
</ul>
<h1><a class="anchor" id="autotoc_md186"></a>
Features NOT Supported</h1>
<ul>
<li>SBL booting Linux supports only booting from OSPI (see <a class="el" href="EXAMPLES_DRIVERS_SBL_OSPI_LINUX.html">SBL OSPI Linux</a>) and eMMC.</li>
<li>If SD card or other boot modes are required, user might need to switch to booting Linux using Linux uBoot.</li>
</ul>
<h1><a class="anchor" id="autotoc_md187"></a>
Bootflow for SBL booting linux from eMMC</h1>
<dl class="section note"><dt>Note</dt><dd>The binaries for R5, M4 cores need not be in the linux file system <code>(root/lib/firmware)</code>, when SBL is booting Linux.</dd></dl>
<ul>
<li>The bootflow for SBL booting Linux is as follows</li>
</ul>
<p> <style>div.image img[src="sbl_booting_linux_emmc.png"]{width:60%}</style> </p><div class="image">
<img src="sbl_booting_linux_emmc.png" alt=""/>
<div class="caption">
Bootflow for SBL booting Linux</div></div>
<h1><a class="anchor" id="autotoc_md188"></a>
SRAM memory layout for SBL booting Linux</h1>
<dl class="section note"><dt>Note</dt><dd>The memory load address for core applications must not overlap with one other </dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>The load address for R5 and M4 core applications must be consistant with the memory layout in Linux dts</dd></dl>
<ul>
<li>Shown below is the memory map in SRAM for SBL booting Linux</li>
</ul>
<p> <style>div.image img[src="sram_memory_map.png"]{width:20%}</style> </p><div class="image">
<img src="sram_memory_map.png" alt=""/>
<div class="caption">
SRAM memory map for SBL booting Linux</div></div>
<h1><a class="anchor" id="autotoc_md189"></a>
EMMC Partitioning</h1>
<dl class="section note"><dt>Note</dt><dd>The default Linux image for AM64x-evm can be used to boot Linux using SBL </dd>
<dd>
The tiboot3.bin, tispl.bin will not be used for booting Linux when using SBL booting Linux. </dd>
<dd>
The R5 binaries in the Linux filesystem (eg : <code>root/lib/firmware/am64-main-r5f0_0-fw</code>) will not be used when SBL boots Linux and R5,M4 cores.</dd></dl>
<ul>
<li>eMMC uses two patitions to boot Linux<ul>
<li>A boot patition<ul>
<li>tiboot3.bin</li>
<li>tispl.bin</li>
<li>u-boot.img</li>
<li>uboot.env</li>
</ul>
</li>
<li>A ext4 partition in the user data area containing<ul>
<li>Linux Kernel image</li>
<li>Linux DTB</li>
<li>Linux file system</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md190"></a>
See Also</h1>
<ul>
<li><a class="el" href="EXAMPLES_DRIVERS_SBL_EMMC_LINUX.html">SBL EMMC Linux</a></li>
<li><a class="el" href="TOOLS_BOOT.html#LINUX_APPIMAGE_GEN_TOOL">Linux Appimage Generator Tool</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
