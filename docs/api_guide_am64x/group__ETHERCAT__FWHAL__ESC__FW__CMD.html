<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM64x MCU+ SDK: ESC Firmware Command API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM64x MCU+ SDK
   &#160;<span id="projectnumber">08.01.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__ETHERCAT__FWHAL__ESC__FW__CMD.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ESC Firmware Command API<div class="ingroups"><a class="el" href="group__INDUSTRIAL__COMMS__ETHERCAT__SLAVE__FWHAL__MODULE.html">APIs for Ethercat Slave FWHAL</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Introduction</h2>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaed1827fafaf334a83ea6b27005e52698"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ETHERCAT__FWHAL__ESC__FW__CMD.html#gaed1827fafaf334a83ea6b27005e52698">bsp_send_command_to_firmware</a> (<a class="el" href="group__DRV__PRUICSS__MODULE.html#gafdf3be241ef82d4dd736032e9020f163">PRUICSS_Handle</a> pruIcssHandle, uint32_t command, uint16_t param1, uint16_t param2)</td></tr>
<tr class="memdesc:gaed1827fafaf334a83ea6b27005e52698"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send command and parameters from stack to firmware to perform some action based on stack state or in response to AL event interrupt or SYNC interrupt from ESC.  <a href="group__ETHERCAT__FWHAL__ESC__FW__CMD.html#gaed1827fafaf334a83ea6b27005e52698">More...</a><br /></td></tr>
<tr class="separator:gaed1827fafaf334a83ea6b27005e52698"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaed1827fafaf334a83ea6b27005e52698"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaed1827fafaf334a83ea6b27005e52698">&#9670;&nbsp;</a></span>bsp_send_command_to_firmware()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bsp_send_command_to_firmware </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__DRV__PRUICSS__MODULE.html#gafdf3be241ef82d4dd736032e9020f163">PRUICSS_Handle</a>&#160;</td>
          <td class="paramname"><em>pruIcssHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>param1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>param2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send command and parameters from stack to firmware to perform some action based on stack state or in response to AL event interrupt or SYNC interrupt from ESC. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pruIcssHandle</td><td>PRU-ICSS Handle </td></tr>
    <tr><td class="paramname">command</td><td>Command Id to be executed by ESC firmware </td></tr>
    <tr><td class="paramname">param1</td><td>parameter1 corresponding to the command </td></tr>
    <tr><td class="paramname">param2</td><td>parameter2 corresponding to the command</td></tr>
  </table>
  </dd>
</dl>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Command  </th><th class="markdownTableHeadNone">Id  </th><th class="markdownTableHeadNone">Param1  </th><th class="markdownTableHeadNone">Param 2  </th><th class="markdownTableHeadNone">Return Val  </th><th class="markdownTableHeadNone">Remarks   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CMD_DL_USER_ACK_MBX_READ  </td><td class="markdownTableBodyNone">4  </td><td class="markdownTableBodyNone">address  </td><td class="markdownTableBodyNone">length  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">Indicate PDI side mailbox read completion to firmware   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CMD_DL_USER_ACK_MBX_WRITE  </td><td class="markdownTableBodyNone">5  </td><td class="markdownTableBodyNone">address  </td><td class="markdownTableBodyNone">length  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">Indicate PDI side mailbox write to firmware   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CMD_DL_USER_EEPROM_CMD_ACK  </td><td class="markdownTableBodyNone">6  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">Acknowledge EEEPROM emulation command execution by ARM host stack   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CMD_DL_USER_READ_SYNC_STATUS  </td><td class="markdownTableBodyNone">7  </td><td class="markdownTableBodyNone">sync_sel  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">Indicate SYNC0/1 status register read by PDI to firmware   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CMD_DL_USER_READ_AL_CONTROL  </td><td class="markdownTableBodyNone">8  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">Indicate AL control register read by PDI to firmware   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CMD_DL_USER_WRITE_AL_STATUS  </td><td class="markdownTableBodyNone">9  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">Indicate AL status register write by PDI to firmware   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CMD_DL_USER_READ_PD_WD_STATUS  </td><td class="markdownTableBodyNone">10  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">Indicate PD watchdog status register read by PDI to firmware updating register status   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CMD_DL_USER_READ_SM_ACTIVATE  </td><td class="markdownTableBodyNone">11  </td><td class="markdownTableBodyNone">sm_index  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">Indicate SM activate register read by PDI to firmware   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CMD_DL_USER_WRITE_SM_PDI_CTRL  </td><td class="markdownTableBodyNone">12  </td><td class="markdownTableBodyNone">(sm_index&lt;&lt;8) OR pdi control reg value  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">Indicate SM PDI control write to control SM from PDI to firmware   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CMD_DL_USER_READ_LATCH_TIME  </td><td class="markdownTableBodyNone">13  </td><td class="markdownTableBodyNone">latch_sel  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">Indicate Latch0/1 time registest read by PDI to firmware   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CMD_DL_USER_READ_SYS_TIME  </td><td class="markdownTableBodyNone">14  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">Indicate System Time register read by PDI to firmware   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CMD_DL_USER_CLEAR_AL_EVENT_LOW  </td><td class="markdownTableBodyNone">15  </td><td class="markdownTableBodyNone">event_mask  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">Clear events not set in event_mask in AL event request register   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CMD_DL_USER_SYSTIME_PDI_CONTROL  </td><td class="markdownTableBodyNone">16  </td><td class="markdownTableBodyNone">reg_sel  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">Indicate to the firmware DC register update from PDI side   </td></tr>
</table>
<p>Struct for host to PRU ICSS command interface - <a class="el" href="structt__host__interface.html">t_host_interface</a></p>
<p>IMPORTANT NOTE on SUPPORT_CMDACK_POLL_MODE: EtherCAT firmware supports both poll mode and interrupt mode for command acknowledge. It is found that poll mode offers better latency in given scenarios but will waste CPU cycles busy waiting for command response from PRU. If you need to switch to command ack interrupt mode comment the define for SUPPORT_CMDACK_POLL_MODE in <a class="el" href="tiescbsp_8h.html">tiescbsp.h</a> </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
