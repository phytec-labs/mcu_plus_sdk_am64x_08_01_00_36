<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM64x MCU+ SDK: Sciclient DKEK API Interface</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM64x MCU+ SDK
   &#160;<span id="projectnumber">08.01.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__SCICLIENT__FMW__DKEK__IF.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Sciclient DKEK API Interface<div class="ingroups"><a class="el" href="group__DRV__MODULE.html">APIs for SOC Specific Device Drivers</a> &raquo; <a class="el" href="group__DRV__SCICLIENT__MODULE.html">APIs for SCI Client or SYSFW/DMSC FW</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Introduction</h2>
<p>K3 HS devices have a randomly generated 256 bit key written into the efuses in TI Factory. This key is called a Key Encryption Key (KEK) and is unique to each device. The key is only accessible via an AES engine which is controlled by the DMSC. System controller firmware uses CMAC as the Pseudo Random Function(PRF) in counter mode to derive a new KEK, called DKEK. The DKEK can be accessed in the following ways:</p>
<ul>
<li>Indirectly by having DMSC program the DKEK into the SA2UL registers and accessing through the USE_DKEK flag in the security context.</li>
<li>Directly by having DMSC derive the key and return the key value over the secure queue for CPU-based encryption routines. </li>
</ul>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:sciclient__dkek_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sciclient__dkek_8h.html">sciclient_dkek.h</a></td></tr>
<tr class="memdesc:sciclient__dkek_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">This file contains the definition of all the message IDs, message formats to be able to interact with the System Controller firmware for DKEK management. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae9971e0d4ca49deca15d52132d8fa163"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SCICLIENT__FMW__DKEK__IF.html#gae9971e0d4ca49deca15d52132d8fa163">Sciclient_setDKEK</a> (const struct <a class="el" href="structtisci__msg__sa2ul__set__dkek__req.html">tisci_msg_sa2ul_set_dkek_req</a> *req, struct <a class="el" href="structtisci__msg__sa2ul__set__dkek__resp.html">tisci_msg_sa2ul_set_dkek_resp</a> *resp, uint32_t timeout)</td></tr>
<tr class="memdesc:gae9971e0d4ca49deca15d52132d8fa163"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request to derive a KEK and set SA2UL DKEK register.  <a href="group__SCICLIENT__FMW__DKEK__IF.html#gae9971e0d4ca49deca15d52132d8fa163">More...</a><br /></td></tr>
<tr class="separator:gae9971e0d4ca49deca15d52132d8fa163"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7bb0002f702b3101c8ee4623c821e0df"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SCICLIENT__FMW__DKEK__IF.html#ga7bb0002f702b3101c8ee4623c821e0df">Sciclient_releaseDKEK</a> (const struct <a class="el" href="structtisci__msg__sa2ul__release__dkek__req.html">tisci_msg_sa2ul_release_dkek_req</a> *req, struct <a class="el" href="structtisci__msg__sa2ul__release__dkek__resp.html">tisci_msg_sa2ul_release_dkek_resp</a> *resp, uint32_t timeout)</td></tr>
<tr class="memdesc:ga7bb0002f702b3101c8ee4623c821e0df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request to erase the DKEK register.  <a href="group__SCICLIENT__FMW__DKEK__IF.html#ga7bb0002f702b3101c8ee4623c821e0df">More...</a><br /></td></tr>
<tr class="separator:ga7bb0002f702b3101c8ee4623c821e0df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadf4038a9409d943f68b4ea47897af93d"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SCICLIENT__FMW__DKEK__IF.html#gadf4038a9409d943f68b4ea47897af93d">Sciclient_getDKEK</a> (const struct <a class="el" href="structtisci__msg__sa2ul__get__dkek__req.html">tisci_msg_sa2ul_get_dkek_req</a> *req, struct <a class="el" href="structtisci__msg__sa2ul__get__dkek__resp.html">tisci_msg_sa2ul_get_dkek_resp</a> *resp, uint32_t timeout)</td></tr>
<tr class="memdesc:gadf4038a9409d943f68b4ea47897af93d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request for getting the firewall permissions.  <a href="group__SCICLIENT__FMW__DKEK__IF.html#gadf4038a9409d943f68b4ea47897af93d">More...</a><br /></td></tr>
<tr class="separator:gadf4038a9409d943f68b4ea47897af93d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="gae9971e0d4ca49deca15d52132d8fa163"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae9971e0d4ca49deca15d52132d8fa163">&#9670;&nbsp;</a></span>Sciclient_setDKEK()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Sciclient_setDKEK </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structtisci__msg__sa2ul__set__dkek__req.html">tisci_msg_sa2ul_set_dkek_req</a> *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtisci__msg__sa2ul__set__dkek__resp.html">tisci_msg_sa2ul_set_dkek_resp</a> *&#160;</td>
          <td class="paramname"><em>resp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Request to derive a KEK and set SA2UL DKEK register. </p>
<p><br  />
<b>Message</b>: <a class="el" href="group__tisci__protocol.html#ga92a66fb517c17a760ec2b1371d998a67">TISCI_MSG_SA2UL_SET_DKEK</a> <br  />
<b>Request</b>: <a class="el" href="structtisci__msg__sa2ul__set__dkek__req.html" title="TISCI Request for setting DKEK in SA2UL registers.">tisci_msg_sa2ul_set_dkek_req</a> <br  />
<b>Response</b>: <a class="el" href="structtisci__msg__sa2ul__set__dkek__resp.html" title="TISCI Response for setting DKEK in SA2UL registers.">tisci_msg_sa2ul_set_dkek_resp</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">req</td><td>Pointer to DKEK set request payload</td></tr>
    <tr><td class="paramname">resp</td><td>Pointer to DKEK set response payload</td></tr>
    <tr><td class="paramname">timeout</td><td>Gives a sense of how long to wait for the operation. Refer <a class="el" href="group__KERNEL__DPL__SYSTEM.html#SystemP_Timeout">SystemP_Timeout</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SystemP_SUCCESS on success, else failure </dd></dl>

</div>
</div>
<a id="ga7bb0002f702b3101c8ee4623c821e0df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7bb0002f702b3101c8ee4623c821e0df">&#9670;&nbsp;</a></span>Sciclient_releaseDKEK()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Sciclient_releaseDKEK </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structtisci__msg__sa2ul__release__dkek__req.html">tisci_msg_sa2ul_release_dkek_req</a> *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtisci__msg__sa2ul__release__dkek__resp.html">tisci_msg_sa2ul_release_dkek_resp</a> *&#160;</td>
          <td class="paramname"><em>resp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Request to erase the DKEK register. </p>
<p><br  />
<b>Message</b>: <a class="el" href="group__tisci__protocol.html#gab10fee86950e0f67fca7f8733bfdd730">TISCI_MSG_SA2UL_RELEASE_DKEK</a> <br  />
<b>Request</b>: <a class="el" href="structtisci__msg__sa2ul__release__dkek__req.html" title="TISCI Request for releasing DKEK.">tisci_msg_sa2ul_release_dkek_req</a> <br  />
<b>Response</b>: <a class="el" href="structtisci__msg__sa2ul__release__dkek__resp.html" title="TISCI Response for Releasing DKEK.">tisci_msg_sa2ul_release_dkek_resp</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">req</td><td>Pointer to DKEK release request payload</td></tr>
    <tr><td class="paramname">resp</td><td>Pointer to DKEK release response payload</td></tr>
    <tr><td class="paramname">timeout</td><td>Gives a sense of how long to wait for the operation. Refer <a class="el" href="group__KERNEL__DPL__SYSTEM.html#SystemP_Timeout">SystemP_Timeout</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SystemP_SUCCESS on success, else failure </dd></dl>

</div>
</div>
<a id="gadf4038a9409d943f68b4ea47897af93d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadf4038a9409d943f68b4ea47897af93d">&#9670;&nbsp;</a></span>Sciclient_getDKEK()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Sciclient_getDKEK </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structtisci__msg__sa2ul__get__dkek__req.html">tisci_msg_sa2ul_get_dkek_req</a> *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtisci__msg__sa2ul__get__dkek__resp.html">tisci_msg_sa2ul_get_dkek_resp</a> *&#160;</td>
          <td class="paramname"><em>resp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Request for getting the firewall permissions. </p>
<p><br  />
<b>Message</b>: <a class="el" href="group__tisci__protocol.html#gadc4a062b844f61eab0cbe6c56cb3fc85">TISCI_MSG_SA2UL_GET_DKEK</a> <br  />
<b>Request</b>: <a class="el" href="structtisci__msg__sa2ul__release__dkek__req.html" title="TISCI Request for releasing DKEK.">tisci_msg_sa2ul_release_dkek_req</a> <br  />
<b>Response</b>: <a class="el" href="structtisci__msg__sa2ul__release__dkek__resp.html" title="TISCI Response for Releasing DKEK.">tisci_msg_sa2ul_release_dkek_resp</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">req</td><td>Pointer to DKEK get request payload</td></tr>
    <tr><td class="paramname">resp</td><td>Pointer to DKEK get response payload</td></tr>
    <tr><td class="paramname">timeout</td><td>Gives a sense of how long to wait for the operation. Refer <a class="el" href="group__KERNEL__DPL__SYSTEM.html#SystemP_Timeout">SystemP_Timeout</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SystemP_SUCCESS on success, else failure </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
