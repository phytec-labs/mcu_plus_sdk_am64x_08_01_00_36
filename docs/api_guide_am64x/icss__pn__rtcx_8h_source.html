<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM64x MCU+ SDK: icss_pn_rtcx.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM64x MCU+ SDK
   &#160;<span id="projectnumber">08.01.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('icss__pn__rtcx_8h_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">icss_pn_rtcx.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="icss__pn__rtcx_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *  Copyright (C) 2021 Texas Instruments Incorporated</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *  Redistribution and use in source and binary forms, with or without</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *  modification, are permitted provided that the following conditions</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *  are met:</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *    Redistributions of source code must retain the above copyright</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *    notice, this list of conditions and the following disclaimer.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *    Redistributions in binary form must reproduce the above copyright</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *    notice, this list of conditions and the following disclaimer in the</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *    documentation and/or other materials provided with the</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *    distribution.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *    Neither the name of Texas Instruments Incorporated nor the names of</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *    its contributors may be used to endorse or promote products derived</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> *    from this software without specific prior written permission.</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> *  &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> *  LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> *  A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> *  OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> *  SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> *  LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> *  DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> *  THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> *  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> *  OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">//*****************************************************************************/</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">// file:   icss_pn_rtcx.h</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">// brief:  Definitions and mapping of Profinet cyclic data exchange for RT and IRT</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">//         Includes:</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">//         1. Sendlist and Receivelist with shadow operation</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">//         2. Descriptors in lists for cyclic data exchange</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">//         3. Configuration for cyclic data exchange and start-up</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">//         4. Configuration for IRT phase management</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">//         5. Parameter exchange between host and PRU for time sync</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">//         6. Events for cyclic data exchange</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#ifndef __ICSS_PN_RTCX__</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#define __ICSS_PN_RTCX__</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">// Target switches: PRU / ARM</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">// Protocol switches: PROFINET , PN_IOD, PN_IOC</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">// Global settings</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#ifndef     PN_IOD</span></div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#af9aa2618fc777b3c58fe484a5fcabc67">   55</a></span>&#160;<span class="preprocessor">#define     PN_IOD</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">// IOD Definitions</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#ifdef PN_IOD</span></div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a9e5da0fcd2da37ffa8a59f2df829e2b7">   60</a></span>&#160;<span class="preprocessor"> #define NO_PPM     8</span></div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a2b2d8808b17608290b22b0f45d4b81f8">   61</a></span>&#160;<span class="preprocessor"> #define NO_CPM     8</span></div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a50afa9e86af027153d249c1376da91b5">   62</a></span>&#160;<span class="preprocessor"> #define NO_PM      8       // FW driver uses this number for CPM/PPM size!</span></div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a088a74e57ff57f4a4a3b2da4ce8f29bf">   63</a></span>&#160;<span class="preprocessor"> #define NO_AR      8</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">// IOC definitions</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor"> #define NO_PPM     256</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor"> #define NO_CPM     256</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor"> #define NO_AR      256</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">// CONSTANT ARE DEFINED HERE</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">// Yellow safety margin is 640 ns.</span></div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a2b16ffbaee857773795debaffdc73762">   73</a></span>&#160;<span class="preprocessor">#define YELLOW_SAFETY_MARGIN        0x0280</span></div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#af7b52a6a88de416445540cf3a41470a3">   74</a></span>&#160;<span class="preprocessor">#define DCP_IDENTREQ_FRAMEID        0xfefe</span></div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a1bcde7e5a7cbf625c04e2ba3f07a0655">   75</a></span>&#160;<span class="preprocessor">#define DCP_NAME_CMP_NO_OF_CHAR     8</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">// offset of the first character of dcp name in incoming dcp frame assuming it is in R2 register.</span></div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a67a3c02080673e9b16c035a756cb2388">   77</a></span>&#160;<span class="preprocessor">#define DCP_NAME_FRAME_PTR_OFFSET   0x8</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">// offset of the first character of the set of &quot;last eight characters&quot; of slave name assuming it is read in R10 register</span></div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a7919ceb0187b7a9b6db717059908f446">   79</a></span>&#160;<span class="preprocessor">#define DCP_NAME_SLAVE_PTR_OFFSET   0x28</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a5bbe15375d9dc763e0181b0fcdc2f944">   81</a></span>&#160;<span class="preprocessor">#define RTC_3125_CLK_CONST          0x7A12      // const for 31.25us cycle</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#aaac498f6813940fe759af3a35d433b76">   83</a></span>&#160;<span class="preprocessor">#define MAX_BRIDGE_DELAY            3020        // 2920 + 100ns</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#af631910faf8f58947a562dad2ee3843b">   85</a></span>&#160;<span class="preprocessor">#define RTC3_PPM_FIFO_PUSH_MARGIN   6720</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">// Common scratch pad usage for CPM DHT in bank0</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">// r29.t0 indicates critical section of DHT updates in pn_rtc1_schedule</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">// when set to 1 indicates that DHT cannot be modified in pn_rtc1_receive</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">// when set to 0 indicates DHT can be overwritten. The critical section needs to consider</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">// latency of SBCO command which is like a 2-1-1-1 burst for 16 bytes of DHT update.</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ae06f8072b75e18bfd10db881d7d9bf4d">   93</a></span>&#160;<span class="preprocessor">#define PN_CRITICAL_DHT_REG     R29.b0</span></div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a8e83ac6da00930a5047315eba33be8f5">   94</a></span>&#160;<span class="preprocessor">#define PN_CRITICAL_DHT_FLAG    t0</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">// Sendlist (PPMs) and Receivelist (CPMs)</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">// Cyclic data is exchanged using separate lists for send and receive. For dynamic handling of connections there is a shadow</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">// list which can be prepared by host while active list is processed by PRU on send and receive. There is an index in</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">// RTC_CPM_INDEX and RTC_PPM_INDEX indicating which list is active.</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">// Each list is pre-sorted by period, port and time. The index for period and port is also given in index register.</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">// Index register: entries in this register are position in list (0-7) * 12 bytes. Simplifies PRU code as *12 is not easily done</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">// with shift.</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">// RTC_CPM_INDEX_L1/2 / RTC_PPM_INDEX_L1/2</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">// Bit      Name                Description</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">// 0..7     RTC_RED_PORT_IDX    points to first port 2 descriptor in red period</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">// 8..15    RTC_GREEN_IDX       points to first descriptor of green period,</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">// 16..23   RTC_GREEN_PORT_IDX  points to first port 2 descriptor in green period</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">// 24..31   RTC_GREEN_END_IDX   points to last descriptor of green period</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">// RTC_LIST_INDEX_OFFSET</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">// Bit      Name                Description</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">// 0        RTC_CPM_IDX_PRU     Index which CPM list is used. 0 = list 1, 1 = list 2</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">// 1        RTC_PPM_IDX_PRU</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">// 8        RTC_CPM_IDX_HOST    Index which PPM list is used. 0 = list 1, 1 = list 2</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">// 9        RTC_PPM_IDX_HOST</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">// All the following offsets are applied to RTC_CONFIG_OFFSET which is after PPM_LIST on PRU0 DMEM.</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">// 8 bytes for DHT expire source. Each CPM has one byte to indicate if it&#39;s DHT expired</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a4991a9529889e7bf4cd1f3037205b427">  125</a></span>&#160;<span class="preprocessor">#define RTC_NOTIFY_DHT_EXPIRE_OFFSET    0x10   // 8 bytes</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a6602314c4d46f947fbf00396b9ff22d8">  127</a></span>&#160;<span class="preprocessor">#define RTC_PPM_INDEX_L1_OFFSET     RTC_NOTIFY_DHT_EXPIRE_OFFSET +8</span></div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#aa88594661f3337568e6835c26fd883d4">  128</a></span>&#160;<span class="preprocessor">#define RTC_PPM_INDEX_L2_OFFSET     RTC_PPM_INDEX_L1_OFFSET + 4</span></div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#aabe8b96c72ebe9d114d96705168170f5">  129</a></span>&#160;<span class="preprocessor">#define RTC_LIST_INDEX_OFFSET       RTC_PPM_INDEX_L2_OFFSET + 4</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="preprocessor">#ifdef PRU</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="preprocessor">#define RTC_RED_PORT_IDX        b0</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="preprocessor">#define RTC_GREEN_IDX           b1</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="preprocessor">#define RTC_GREEN_PORT_IDX      b2</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="preprocessor">#define RTC_GREEN_END_IDX       b3</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">// there is only one pru writing to this field at different times - assumes CPM and PPM are on same port.</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="preprocessor">#define RTC_CPM_IDX_PRU         t0   // host read, pru write</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="preprocessor">#define RTC_PPM_IDX_PRU         t1   // host read, pru write</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="preprocessor">#define RTC_CPM_IDX_HOST        t8   // host write, pru read</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="preprocessor">#define RTC_PPM_IDX_HOST        t9   // host write, pru read</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ab88d012be16004ae62cc6824345bd5e3">  144</a></span>&#160;<span class="preprocessor">#define RTC_RED_PORT_IDX        0</span></div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ac9251ba8395c964247870c01b85ad614">  145</a></span>&#160;<span class="preprocessor">#define RTC_GREEN_IDX           1   // byte offset to rtc_index_ptr</span></div>
<div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a0b93c82f7af2332c94f7d6ccf0b92fdb">  146</a></span>&#160;<span class="preprocessor">#define RTC_GREEN_PORT_IDX      2</span></div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a812099ab8ddbf3a5fdeaf1063f0d31b1">  147</a></span>&#160;<span class="preprocessor">#define RTC_GREEN_END_IDX       3</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">// directions - make sure all lists are using this defines</span></div>
<div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a3ae23b6fdfff90263abb71c2933ee3de">  151</a></span>&#160;<span class="preprocessor">#define CPM 0</span></div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a322d53d23d7208a9e6a86b52db9732d1">  152</a></span>&#160;<span class="preprocessor">#define PPM 1</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">// CRITICAL mapping from 0x0012 to 0x0020 which allows for single PRU reads of CPM and PPM configuration</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">// CPM monitoring has activation bit which needs to be set per CPM.</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">// PPM is removed on CPM failure. This function is also activated.</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">// when RTC_CPM_ACTIVE_x bit is set then monitoring of incoming packet is activated including DHT</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">// when RTC_PPM_ACTIVE_x bit is set then PPM is stopped on corresponding CPM error.</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">// This is for IOD only. IOC needs 256 bits per direction.</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#aa289e404a836e629e382b41aeb2f32a6">  162</a></span>&#160;<span class="preprocessor">#define RTC_CPM_ACTIVE_OFFSET       RTC_LIST_INDEX_OFFSET + 2</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="preprocessor">#ifdef PRU</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="preprocessor">#define RTC_CPM_ACTIVE_1        t0</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="preprocessor">#define RTC_CPM_ACTIVE_2        t1</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="preprocessor">#define RTC_CPM_ACTIVE_3        t2</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="preprocessor">#define RTC_CPM_ACTIVE_4        t3</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="preprocessor">#define RTC_CPM_ACTIVE_5        t4</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="preprocessor">#define RTC_CPM_ACTIVE_6        t5</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="preprocessor">#define RTC_CPM_ACTIVE_7        t6</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="preprocessor">#define RTC_CPM_ACTIVE_8        t7</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="preprocessor">#define RTC_PPM_ACTIVE_1        t0</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="preprocessor">#define RTC_PPM_ACTIVE_2        t1</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="preprocessor">#define RTC_PPM_ACTIVE_3        t2</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="preprocessor">#define RTC_PPM_ACTIVE_4        t3</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="preprocessor">#define RTC_PPM_ACTIVE_5        t4</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="preprocessor">#define RTC_PPM_ACTIVE_6        t5</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="preprocessor">#define RTC_PPM_ACTIVE_7        t6</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="preprocessor">#define RTC_PPM_ACTIVE_8        t7</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">// CPM/PPM STATUS</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">// consumer and provider can be of status ERROR or OK/RUN. For this one bit per connection is reserved in</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">// Status register for CPM and PPM.</span></div>
<div class="line"><a name="l00186"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a8d940a93a7da6b547009016618f8a9d8">  186</a></span>&#160;<span class="preprocessor">#define RTC_PPM_OK              1</span></div>
<div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ae49a1bfd644185a9210c63be2df9a2fd">  187</a></span>&#160;<span class="preprocessor">#define RTC_PPM_ERROR           0</span></div>
<div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ad77f82e3d68a8027b7127c08b847e03a">  188</a></span>&#160;<span class="preprocessor">#define RTC_CPM_RUN             1</span></div>
<div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a9b1ae4a25876306f7e06d127621878ab">  189</a></span>&#160;<span class="preprocessor">#define RTC_CPM_FAILURE         0</span></div>
<div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#acd51f55e71e8b68882f734afdd54d835">  190</a></span>&#160;<span class="preprocessor">#define RTC_CPM_STATUS_OFFSET   RTC_CPM_ACTIVE_OFFSET + 1</span></div>
<div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#adef60f366a8da22a0077d41e19d8fb63">  191</a></span>&#160;<span class="preprocessor">#define RTC_PPM_STATUS_OFFSET   RTC_CPM_STATUS_OFFSET + 2</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a4032e7df233761eee94fd1fab21ffb2d">  193</a></span>&#160;<span class="preprocessor">#define RTC_EXECUTE_DHT_CODE    RTC_PPM_STATUS_OFFSET + 2</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">// PPM_SEND_STATUS is defined as</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">// 0 = PPM not sent</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">// 0xFF = PPM descriptor not yet read from PRU b</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">// 0x10 = PPM send active (PRU is transferring packet from PPM buffer to MII TX fifo)</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">// 0x20 = PPM send complete (PRU has pushed last bytes of packet into MII TX fifo)</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">// state transitions:</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">// 0 -&gt; 1 : PRU sets to one at the beginning of PPM send, host does not write to PPM_SEND_STATUS when value is 0 or 1</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">// 1 -&gt; 2 : PRU sets to two at the end of PPM send. host can now reset to 0</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">// 2 -&gt; 0 : host received interrupt or polls state and sees a value of 2. Host then resets state to 0</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">// 2 -&gt; 1 : in case host did not see last packet send complete and PRU needs to send another packet.</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">// all other transitions are not defined. Normal sequence is 0 -&gt; 1 -&gt; 2 -&gt; 0.</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a292450009c90578540c8065df9ca8c84">  207</a></span>&#160;<span class="preprocessor">#define RTC_PPM_SEND_STATUS_OFFSET  RTC_EXECUTE_DHT_CODE + 1      // 8 bytes ... 1 byte for each PPM</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">// Buffer locked indication for CPM index indicated to consumer is locked, provider will not overwrite until cleared</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">// CPM: one byte per CPM set and cleared by host, 00 = buffer 1, 01 = buffer 2, 02 = buffer 3, 03 = no locked</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">// moved to free space as it is now 1 byte per CPM.</span></div>
<div class="line"><a name="l00213"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#acb26561e4b97528f28bed2ab547a67d7">  213</a></span>&#160;<span class="preprocessor">#define RTC_CPM_BUFFER_LOCK_OFFSET  0x30 //RTC_PPM_SEND_STATUS_OFFSET + 8   // 8 bytes ... 1 byte for each CPM</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">// Register to indicate fdb_flush mode - 1 byte. 0 = not active, 1 - fdb_flush mode active</span></div>
<div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#aa5a52ecc45325463116007f27e9836f3">  216</a></span>&#160;<span class="preprocessor">#define RTC_MRP_FDB_FLUSH_OFFSET            RTC_CPM_BUFFER_LOCK_OFFSET + 9</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">// Base clock is used to schedule provider data in RT and IRT. For RT there is a min base clock of 250us.</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">// RTC_IRT_BASE_CLK: is multiplier of 31.25 us (default = 8 which corresponds to 250 us base clock)</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">// Base clock is given as a shift value as send_clock_factor is power of 2. E.g. value of 3 in this field</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">// means send_clock_Factor of 8 = 250 us base clock. Value of 5 provides 1 ms base clock.</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a109779ccda51ca247c122ae44397958d">  223</a></span>&#160;<span class="preprocessor">#define PRU0_PHASE_EVENT_OFFSET             RTC_MRP_FDB_FLUSH_OFFSET + 1        // 8 bit to separate writes</span></div>
<div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a07ba138d3f3d7eb915aef453a53b15f4">  224</a></span>&#160;<span class="preprocessor">#define PRU1_PHASE_EVENT_OFFSET             PRU0_PHASE_EVENT_OFFSET + 1</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a1594996413de9389f23a089929038a4a">  226</a></span>&#160;<span class="preprocessor">#define RTC_PHASE_COUNTER_OFFSET            PRU1_PHASE_EVENT_OFFSET + 3         // 16 bit for phase counter</span></div>
<div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a5e6188f6e206d5de21882edc8948f598">  227</a></span>&#160;<span class="preprocessor">#define RTC_SEND_LIST_P1_OFFSET             RTC_PHASE_COUNTER_OFFSET + 2</span></div>
<div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a0f901c1d1db96aa206676bf2382b7312">  228</a></span>&#160;<span class="preprocessor">#define RTC_SEND_LIST_P2_OFFSET             RTC_SEND_LIST_P1_OFFSET + 8</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">// SCF = send clock factor is power of 2. Up to 4096 (128ms) with RTC1 and 32 (1ms)with RTC3</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">// RTC_SCF and RTC_CYLE_COUNTER need to be next to each other as used with single LBCO!!!</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ae9a7b53e31dfd6848774f0b413834732">  233</a></span>&#160;<span class="preprocessor">#define RTC_SCF_OFFSET              RTC_SEND_LIST_P2_OFFSET + 8</span></div>
<div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a22430edd689cdb4e78913f5b2bf65c9a">  234</a></span>&#160;<span class="preprocessor">#define RTC_CYCLE_COUNTER_OFFSET    RTC_SCF_OFFSET + 2</span></div>
<div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a121c3a16a2ca226e6e51b45ef72f1abb">  235</a></span>&#160;<span class="preprocessor">#define RTC_BASE_CLK_OFFSET         RTC_CYCLE_COUNTER_OFFSET + 2</span></div>
<div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a74e6e68ed0e31ba5a2a64d2ea585ef21">  236</a></span>&#160;<span class="preprocessor">#define PTCP_ABS_COUNTER_OFFSET     RTC_BASE_CLK_OFFSET + 4             // moved here for optimization</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">// RTC3 frames need to check for valid FRAME ID range also called red guard</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">// FID is 16 bit</span></div>
<div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ac60cef6ee52005f08e98f2432f7aa78b">  240</a></span>&#160;<span class="preprocessor">#define RTC3_SOF_RedFrameID_OFFSET  0x5c//PTCP_ABS_COUNTER_OFFSET + 4</span></div>
<div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#adda3a336f31cb635b8ce143ab82bcf1c">  241</a></span>&#160;<span class="preprocessor">#define RTC3_EOF_RedFrameID_OFFSET  RTC3_SOF_RedFrameID_OFFSET + 2</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ada305a86e0eeadc1b332fbef7ee3a592">  243</a></span>&#160;<span class="preprocessor">#define RTC_DEVICE_SYNC_STATUS_OFFSET           RTC3_EOF_RedFrameID_OFFSET + 2</span></div>
<div class="line"><a name="l00244"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#aa3f6ac2cde2cfc8f5912504df93399e1">  244</a></span>&#160;<span class="preprocessor">#define RTC_YELLOW_PERIOD_CONFIGURED_OFFSET     RTC_DEVICE_SYNC_STATUS_OFFSET + 1</span></div>
<div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a3da31b1a9dd55be0d252afbdbbf404fc">  245</a></span>&#160;<span class="preprocessor">#define PORT1_STATUS_OFFSET RTC_YELLOW_PERIOD_CONFIGURED_OFFSET + 1</span></div>
<div class="line"><a name="l00246"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#abe0c6e2b34a53f0ef99a6cf813d14ca6">  246</a></span>&#160;<span class="preprocessor">#define PORT2_STATUS_OFFSET PORT1_STATUS_OFFSET + 1</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#aa07c541b22b37ccf0c34f46118c044bc">  248</a></span>&#160;<span class="preprocessor">#define MAXLINE_RXDELAY_P1_OFFSET   PORT2_STATUS_OFFSET + 1</span></div>
<div class="line"><a name="l00249"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a0336b37ffb5fa976a558769ef1ef1261">  249</a></span>&#160;<span class="preprocessor">#define MAXLINE_RXDELAY_P2_OFFSET   MAXLINE_RXDELAY_P1_OFFSET + 4</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160; </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">// Bytes where PRU&#39;s store the index of active list using which send list has been prepared</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">// These are then used by the RTC Send code</span></div>
<div class="line"><a name="l00253"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a6c4c34c319e7840cdb32fbdc23385b50">  253</a></span>&#160;<span class="preprocessor">#define PRU0_ACTIVE_LIST_INDEX_OFFSET       MAXLINE_RXDELAY_P2_OFFSET + 4</span></div>
<div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#af7f6bd01dbbd778aa4b0280993a2d6c4">  254</a></span>&#160;<span class="preprocessor">#define PRU1_ACTIVE_LIST_INDEX_OFFSET       PRU0_ACTIVE_LIST_INDEX_OFFSET + 1</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">// Below registers are used by PRU firmware for internal usage</span></div>
<div class="line"><a name="l00257"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#aee7e8899d04d171c179078088b798fc3">  257</a></span>&#160;<span class="preprocessor">#define RTC_SCH_EXECUTED_HALF_PRU0_OFFSET   PRU1_ACTIVE_LIST_INDEX_OFFSET + 1   // 2 bytes</span></div>
<div class="line"><a name="l00258"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a88a517ff4df3c483b9dfd03f96be3408">  258</a></span>&#160;<span class="preprocessor">#define RTC_SCH_EXECUTED_HALF_PRU1_OFFSET   RTC_SCH_EXECUTED_HALF_PRU0_OFFSET + 2   // 2 bytes</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ad14debe0ddd675efac41445c38dea7a8">  260</a></span>&#160;<span class="preprocessor">#define MRP_PORT1_STATE_OFFSET      0x72//RTC_SCH_EXECUTED_HALF_PRU1_OFFSET + 2</span></div>
<div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a119da4120a3e2c780c2e8366cde0af30">  261</a></span>&#160;<span class="preprocessor">#define MRP_PORT2_STATE_OFFSET      MRP_PORT1_STATE_OFFSET + 1</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a19a577050f40c490660038d4834e6650">  263</a></span>&#160;<span class="preprocessor">#define RTC_YELLOW_PRD_START_TIME_OFFSET                MRP_PORT2_STATE_OFFSET + 1    // 4 bytes</span></div>
<div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a8950a33aa06192d0a867a682b1ef0bef">  264</a></span>&#160;<span class="preprocessor">#define RTC_YELLOW_SAFETY_MARGIN_PRD_START_TIME_OFFSET  RTC_YELLOW_PRD_START_TIME_OFFSET + 4    // 4 bytes</span></div>
<div class="line"><a name="l00265"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#aa3d84131e1a6e98386a216e46b7ee479">  265</a></span>&#160;<span class="preprocessor">#define RTC_BASE_CLK_CHANGED_OFFSET                     RTC_YELLOW_SAFETY_MARGIN_PRD_START_TIME_OFFSET + 4    // 1 byte</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">// Free byte x006d</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a52efa97a5ffa23fc635d696839e2ae79">  268</a></span>&#160;<span class="preprocessor">#define RTC_SEND_EXECUTED_HALF_PRU0_OFFSET  RTC_BASE_CLK_CHANGED_OFFSET + 2</span></div>
<div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ab605709f55c044d09f0e72c710b9a018">  269</a></span>&#160;<span class="preprocessor">#define RTC_SEND_EXECUTED_HALF_PRU1_OFFSET  RTC_SEND_EXECUTED_HALF_PRU0_OFFSET + 1</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">// Parameters for IRT relative forwarder</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">// There are 5 configurations for GreenPeriodBegin per port and direction. Max value is 0x7A120 equal to 500us.</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">// If 5 configurations then one is 0 which means no red period in this phase.</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">// Orange period is leagay and should be supported.</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a6c6b791a75431ccc8ab3a3f864e186c5">  276</a></span>&#160;<span class="preprocessor">#define RTC_GREEN_BEGIN_P1_1_RX_OFFSET  0x80//RTC_SEND_EXECUTED_HALF_PRU1_OFFSET + 1</span></div>
<div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#abc8f27a0b59c820b6f2589e5c09ac465">  277</a></span>&#160;<span class="preprocessor">#define RTC_GREEN_BEGIN_P1_1_TX_OFFSET  RTC_GREEN_BEGIN_P1_1_RX_OFFSET + 4</span></div>
<div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a63e3aea06bfc29c1ece489f57bfe6fd7">  278</a></span>&#160;<span class="preprocessor">#define RTC_GREEN_BEGIN_P1_2_RX_OFFSET  RTC_GREEN_BEGIN_P1_1_TX_OFFSET + 4</span></div>
<div class="line"><a name="l00279"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a3b9952cc48d9d24b84c0fd3ac8233953">  279</a></span>&#160;<span class="preprocessor">#define RTC_GREEN_BEGIN_P1_2_TX_OFFSET  RTC_GREEN_BEGIN_P1_2_RX_OFFSET + 4</span></div>
<div class="line"><a name="l00280"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a5e458065f64467ed50f0704bb1e95f14">  280</a></span>&#160;<span class="preprocessor">#define RTC_GREEN_BEGIN_P1_3_RX_OFFSET  RTC_GREEN_BEGIN_P1_2_TX_OFFSET + 4</span></div>
<div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ac4d96f476f9b59e63c8ad38af3b79e27">  281</a></span>&#160;<span class="preprocessor">#define RTC_GREEN_BEGIN_P1_3_TX_OFFSET  RTC_GREEN_BEGIN_P1_3_RX_OFFSET + 4</span></div>
<div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a73e6ac4bdd975d628bc0552763977a1d">  282</a></span>&#160;<span class="preprocessor">#define RTC_GREEN_BEGIN_P1_4_RX_OFFSET  RTC_GREEN_BEGIN_P1_3_TX_OFFSET + 4</span></div>
<div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a95dee647c8844e34ff0f72b95a792547">  283</a></span>&#160;<span class="preprocessor">#define RTC_GREEN_BEGIN_P1_4_TX_OFFSET  RTC_GREEN_BEGIN_P1_4_RX_OFFSET + 4</span></div>
<div class="line"><a name="l00284"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ade586976fc2b0d8ee5f8a39989c55dc0">  284</a></span>&#160;<span class="preprocessor">#define RTC_GREEN_BEGIN_P1_5_RX_OFFSET  RTC_GREEN_BEGIN_P1_4_TX_OFFSET + 4</span></div>
<div class="line"><a name="l00285"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a70e2a100d23caacfa7f7ab8bec8ae715">  285</a></span>&#160;<span class="preprocessor">#define RTC_GREEN_BEGIN_P1_5_TX_OFFSET  RTC_GREEN_BEGIN_P1_5_RX_OFFSET + 4</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a47ae2e77cca91e2f3ca33f7bf0125a62">  287</a></span>&#160;<span class="preprocessor">#define RTC_GREEN_BEGIN_P2_1_RX_OFFSET  0xA8//RTC_GREEN_BEGIN_P1_5_TX_OFFSET + 4</span></div>
<div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a8f2024733b546632a629950600a8527a">  288</a></span>&#160;<span class="preprocessor">#define RTC_GREEN_BEGIN_P2_1_TX_OFFSET  RTC_GREEN_BEGIN_P2_1_RX_OFFSET + 4</span></div>
<div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#aa81687639c40b90e68dbca1c063e3b87">  289</a></span>&#160;<span class="preprocessor">#define RTC_GREEN_BEGIN_P2_2_RX_OFFSET  RTC_GREEN_BEGIN_P2_1_TX_OFFSET + 4</span></div>
<div class="line"><a name="l00290"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a53dc75770591220b66b9c1fb969f7b18">  290</a></span>&#160;<span class="preprocessor">#define RTC_GREEN_BEGIN_P2_2_TX_OFFSET  RTC_GREEN_BEGIN_P2_2_RX_OFFSET + 4</span></div>
<div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#af30991c056889dbd94bbefb53e39440f">  291</a></span>&#160;<span class="preprocessor">#define RTC_GREEN_BEGIN_P2_3_RX_OFFSET  RTC_GREEN_BEGIN_P2_2_TX_OFFSET + 4</span></div>
<div class="line"><a name="l00292"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a9b061213e84f3ba96943935330305df1">  292</a></span>&#160;<span class="preprocessor">#define RTC_GREEN_BEGIN_P2_3_TX_OFFSET  RTC_GREEN_BEGIN_P2_3_RX_OFFSET + 4</span></div>
<div class="line"><a name="l00293"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a3f9e0cae6f8b5137b7df7a06091f958c">  293</a></span>&#160;<span class="preprocessor">#define RTC_GREEN_BEGIN_P2_4_RX_OFFSET  RTC_GREEN_BEGIN_P2_3_TX_OFFSET + 4</span></div>
<div class="line"><a name="l00294"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ae647209612080bdf8c367aafad6434b4">  294</a></span>&#160;<span class="preprocessor">#define RTC_GREEN_BEGIN_P2_4_TX_OFFSET  RTC_GREEN_BEGIN_P2_4_RX_OFFSET + 4</span></div>
<div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a46936004e5e10cfa1a4e222250b85f27">  295</a></span>&#160;<span class="preprocessor">#define RTC_GREEN_BEGIN_P2_5_RX_OFFSET  RTC_GREEN_BEGIN_P2_4_TX_OFFSET + 4</span></div>
<div class="line"><a name="l00296"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a5bb6133a8ca4010fb559b3c430bf640c">  296</a></span>&#160;<span class="preprocessor">#define RTC_GREEN_BEGIN_P2_5_TX_OFFSET  RTC_GREEN_BEGIN_P2_5_RX_OFFSET + 4</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">// Each setting can be mapped to up to 16 phases. There are 3 bits required per mapping. Total 48 bits or 6 bytes</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">// bits 0..2 index of RTC_GREEN_BEGIN_Px_y_OFFSET for phase 1</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">// ...</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">// bits 45..47 index of RTC_GREEN_BEGIN_Px_y_OFFSET for phase 16</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a24bd5d87af88b4f18be3b326aaf466e2">  303</a></span>&#160;<span class="preprocessor">#define RTC_PAHSE_MAPPING_OFFSET        0xD0//RTC_GREEN_BEGIN_P2_5_TX_OFFSET + 4</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">// 4 bytes for each phase.. 64 bytes in total. Next data location is 0x100</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a654941cc60f4fd9295b33302eddb376c">  307</a></span>&#160;<span class="preprocessor">#define PN_DCPF_NAME_OFFSET         RTC_PAHSE_MAPPING_OFFSET + 64   // 8 bytes</span></div>
<div class="line"><a name="l00308"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a8ded3ee3f5f19e2563ea4317b28cd16a">  308</a></span>&#160;<span class="preprocessor">#define PN_DCPF_NAME_LENGTH_OFFSET  PN_DCPF_NAME_OFFSET + 8     // 8 bit</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">// Previous cycle counter per CPM is verified with current cycle counter. Not to remember previous</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment">// counter per CPM. For 8 CPMs this is 8 * 16 bit = 16 bytes</span></div>
<div class="line"><a name="l00312"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a8e18dee6094d4c6f12155201a68c8e60">  312</a></span>&#160;<span class="preprocessor">#define CPM_PREV_CYCLE_COUNTER_OFFSET   PN_DCPF_NAME_LENGTH_OFFSET + 4</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment">// Monitoring of incoming packets is done with DHT. Time-out value is specified by host in RTC mode</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">// default setting is 3 (sendcycles). Max value is 255. There is one DHT per CPM.</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment">// todo: need 16 bit values and decouple from location from RTC_CPM_ACTIVE_OFFSET</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">//  RTC_CPM_DHT_OFFSET is updated when CPM is active with every scf*31.25us</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment">//  RTC_CPM_DHT_TIME_OUT_OFFSET is fixed timeout set by host when new CPM is activated</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment">// 16 bit timout/value * 8 CPM = 16 bytes each</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ad4f802fb57dccfd91295c25c49658cf4">  321</a></span>&#160;<span class="preprocessor">#define RTC_CPM_DHT_OFFSET              CPM_PREV_CYCLE_COUNTER_OFFSET + 16</span></div>
<div class="line"><a name="l00322"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a3a3a1a8f95f3ec261d86e3554e0ca947">  322</a></span>&#160;<span class="preprocessor">#define RTC_DHT_TIMEOUT_OFFSET          RTC_CPM_DHT_OFFSET + 16</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">// AR Group - PPM mapping- up to 8 groups. Each group can have up to 8 PPMs which are indicated in this inverted mask</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">// we use this mask and XOR with PPM active field</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment">// byte 0  = AR Group 1</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment">// ..</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">// byte 7  = AR Group 8</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment">// bit 0 = 0 PPM 1 belongs to this group</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment">// bit 0 = 1 PPM 1 does not belong to this group</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">// ...</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">// bit 7 = 1 PPM 7 belongs to this group</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ad0da98e717045ebc7bf01b8e1466e680">  334</a></span>&#160;<span class="preprocessor">#define RTC_AR_GROUP_PPM_OFFSET         RTC_DHT_TIMEOUT_OFFSET + 16</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">// for faster detection of AR group each CPM has one byte which gives the group number it belongs to</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">// byte 0 (CPM 1) = AR Group number 0..7 indicating group number 1..8</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">// ...</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">// byte 7 (CPM 8) = AR Group number 1..8</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#adff938ab62d7693e40b4e1e269ea119b">  341</a></span>&#160;<span class="preprocessor">#define RTC_CPM_AR_GROUP_OFFSET     RTC_AR_GROUP_PPM_OFFSET + 8</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a4dcb188abb02d4e16f07a0b0be6492fd">  343</a></span>&#160;<span class="preprocessor">#define RTC_NOTIFY_DHT_EVENT_OFFSET             RTC_CPM_AR_GROUP_OFFSET + 8         // signals the DHT event (see below)</span></div>
<div class="line"><a name="l00344"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a2d06ef6bf32c9627c0ca548b8b07e928">  344</a></span>&#160;<span class="preprocessor">#define RTC_NOTIFY_LIST_TOGGLE_EVENT_OFFSET     RTC_NOTIFY_DHT_EVENT_OFFSET + 10        // signals the PPM List toggle event (see below)</span></div>
<div class="line"><a name="l00345"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ad24f2f29b085f80e59249b497d2457e4">  345</a></span>&#160;<span class="preprocessor">#define RTC_NOTIFY_DHT_EXPIRE                   0x01        // indicate DHT expire event</span></div>
<div class="line"><a name="l00346"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ae9fa6d6c0f192dddf2ccfcd07aba2e77">  346</a></span>&#160;<span class="preprocessor">#define RTC_NOTIFY_CPM_CRC                      0x02        // indicate CPM CRC</span></div>
<div class="line"><a name="l00347"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a0e4d6bf50b312520062283f5b802e9ed">  347</a></span>&#160;<span class="preprocessor">#define RTC_NOTIFY_CPM_SEQ                      0x03        // CPM sequence counter error</span></div>
<div class="line"><a name="l00348"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#aee90a7c9c91774973be4c85a39253827">  348</a></span>&#160;<span class="preprocessor">#define RTC_NOTIFY_CPM_STAT                     0x04        // CPM status error</span></div>
<div class="line"><a name="l00349"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a8aaf8d9474b7811eef8959d5d619b597">  349</a></span>&#160;<span class="preprocessor">#define RTC_NOTIFY_CPM_LIST_CHANGE              0x05        // CPM List changed</span></div>
<div class="line"><a name="l00350"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a53c464a7ec2a8266cacced8e74adf119">  350</a></span>&#160;<span class="preprocessor">#define RTC_NOTIFY_PPM_LIST_CHANGE              0x06        // PPM List changed</span></div>
<div class="line"><a name="l00351"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#afe85236a589d5272fb20dcac5b8f917f">  351</a></span>&#160;<span class="preprocessor">#define RTC_NOTIFY_ALL_LIST_CHANGE              0x0B        // spcial case: both lists changed</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment">// One byte for each PPM. This will allow to resolve a race condition where PPM Active is cleared when DHT expires</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment">// and it is re-written when the list toggle happens.</span></div>
<div class="line"><a name="l00355"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a89e775d147c3f421dd6455c29a1ea90a">  355</a></span>&#160;<span class="preprocessor">#define RTC_PPM_ACTIVE_OFFSET       0x160//RTC_NOTIFY_LIST_TOGGLE_EVENT_OFFSET + 3</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment">// Free space - 0x00158 = 4 Bytes</span></div>
<div class="line"><a name="l00358"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#acacad85f51c039248a9c7e63fa8316bb">  358</a></span>&#160;<span class="preprocessor">#define RTC_PPM_ACTIVE_SHADOW_OFFSET        RTC_PPM_ACTIVE_OFFSET + 8</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">// Storage space for the CPM buffer addresses for CPM connections. Max 8 AR&#39;s -&gt; 8*3 possible number of buffer addresses.</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">// Each CPM connection would have three buffers allocated. Since, actual CPM frame length may be smaller than statically allocated</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment">// buffer size it is necessary to store the offset addresses of all the three buffers. Total space used = 24*2= 48 bytes.</span></div>
<div class="line"><a name="l00363"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a8cf3c10f2a4008a85568771579a296f8">  363</a></span>&#160;<span class="preprocessor">#define RTC_CPM_BUFFER_ADDRESSES_OFFSET     RTC_PPM_ACTIVE_SHADOW_OFFSET + 8 //0x0160</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00365"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a0d1e0dfc4a21485964c4798c2e2d9bc2">  365</a></span>&#160;<span class="preprocessor">#define ISOM_TIO_TIMEVAL1                    0x190</span></div>
<div class="line"><a name="l00366"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a194283ea184db47883f8dd079b09d0e9">  366</a></span>&#160;<span class="preprocessor">#define ISOM_TIO_DURATION1                   ISOM_TIO_TIMEVAL1 + 4</span></div>
<div class="line"><a name="l00367"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#aaf0aa90545be867c2ca35b890f5f07c3">  367</a></span>&#160;<span class="preprocessor">#define ISOM_TIO_TYPE1                       ISOM_TIO_DURATION1 + 4</span></div>
<div class="line"><a name="l00368"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a594f5f2ad1f1dd7fe1c203fae9ca6bc9">  368</a></span>&#160;<span class="preprocessor">#define ISOM_TIO_ENABLE_OFFSET               ISOM_TIO_TYPE1 + 1</span></div>
<div class="line"><a name="l00369"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a329211270077d7f75d1c261c6e2249a2">  369</a></span>&#160;<span class="preprocessor">#define ISOM_TIO_TIMEVAL2                    ISOM_TIO_TYPE1 + 4</span></div>
<div class="line"><a name="l00370"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a7dc584e15a704fa7766bda08cbaaf757">  370</a></span>&#160;<span class="preprocessor">#define ISOM_TIO_DURATION2                   ISOM_TIO_TIMEVAL2 + 4</span></div>
<div class="line"><a name="l00371"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a25ead598d06e18fb196940d3adf6828e">  371</a></span>&#160;<span class="preprocessor">#define ISOM_TIO_TYPE2                       ISOM_TIO_DURATION2 + 4</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">// Free Space - From 0x01AC to 0x01CC</span></div>
<div class="line"><a name="l00373"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#aab6c6475e4b80e2a365e12d9239be17c">  373</a></span>&#160;<span class="preprocessor">#define RTC_IRT_YELLOW_TIME_OFFSET          0x01D0</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160; </div>
<div class="line"><a name="l00375"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a93f43b342c291b5b2ec790e8fed8241c">  375</a></span>&#160;<span class="preprocessor">#define RTC_AR_GROUP_PPM_SHADOW_OFFSET      0x01D4  // 8 Bytes</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">// PRU clears the event and ARM sets it - 1 bit per PPM</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">// ARM clear the event and PRU sets it - 1 bit per CPM</span></div>
<div class="line"><a name="l00379"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a68f3b38cdeaa42f798ba82afd381a379">  379</a></span>&#160;<span class="preprocessor">#define RTC_CPM_BC_EVENT_OFFSET             0x01DC</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a2dd88e0fc464b35db381a7e3fcdb2c1e">  381</a></span>&#160;<span class="preprocessor">#define COMPENSATION_OFFSET         0x01E4</span></div>
<div class="line"><a name="l00382"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a5b3e98dfa80af7650e50e18142d9de44">  382</a></span>&#160;<span class="preprocessor">#define MAXBRIDGE_DELAY_OFFSET      0x01E8</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment">// Free space from 0x1EC to 0x200 is available for future registers</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160; </div>
<div class="line"><a name="l00386"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a0c28dd2d979205b7b93becc39100f617">  386</a></span>&#160;<span class="preprocessor">#define EOF_RTC_CONFIG                      0x0200</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">// Event generation</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">// PRU issues an interrupt to ARM when packet is received or packet is transmitted. This is aligned with buffer complete flag.</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160; </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">// Descriptor for CPM and PPM is as follows: total 16 bytes or 4 32 bit word.</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">// CPM RTC descriptor for red and green period</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">// Bit      Name            Description</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">// 0..15    FrameReference  16 bit offset into start address pointer for triple buffer CPM (fixed address). Points into cpm triple buffer start addresses (RTC_CPM_BUFFER_ADDRESSES_OFFSET+ offset of current CPM first buffer)</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">// 16..31   FrameLength     11 bits of frame length including VLAN and FCS, set by host only. PRU may verify incoming frame on length which needs to be flexible in terms of stripped VLAN tag. Bit12.15 need to be zero.</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">// 0..15    FrameDataPointer 16 bit absolute address pointing to Profinet data of current index buffer. This pointer masks VLAN tag offset. Points to first byte after FID</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">// 16..23   FrameIndex      Current index of data source which is host on PPM and PRU on CPM.</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">//                          CPM: Before first packet received idx indicated to host with FrameIndex is idx_2 whereas PRU is on idx_0 (not shown in register) . After first packet received by PRU FrameIndex changes to idx_0 and BufferComplete flag is reset by PRU. PRU advances to next index which is idx_1.</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">//24..31    FrameFlags1     CPM: Bit 0: 1 = VLAN TAG present</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">//                          CPM: Bit 1: 0 = CPM received on port 1 (PRU0), 1 = CPM received on port 2 (PRU1)</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">//                          Bit 1..7: reserved</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment">// 24..31   Reserved</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">// 0..15    FrameID         FrameID as provided by engineering. Set by host and used only for CPM. Not used for PPM. MRPD?</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">// 16..23   FrameFlags2     CPM: Bit 0: 0 = received in red, 1 = received in green</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">//                          Bit 1..7: reserved</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">// 24..31   Reserved</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">// 0..15    RR              Reduction Ratio for red period which is max 16.</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">//                          Send in GREEN period: reduction ratio (max 512) set by host and used by PRU to find out whether current phase matches.</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">// 16..31   Phase           CPM: used for DHT update</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160; </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">// -----------------------------------------------</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment">// PPM RTC descriptor for red and green period</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment">// Bit      Name            Description</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">// 0..15    FrameReference  bytes address offset into RTCx - PPM buffer which has fixed base address.</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">// 16..31   FrameLength     11 bits of frame length, set by host only. PRU may verify incoming frame on length.</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment">// 0..31    FrameSendOffset PPM: Send in RED period: FSO as provided by engineering and limited to 22 bits, i.e. 4.1ms. Set by host only.</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">// 0..15    FrameID         FrameID as provided by engineering. Set by host and used only for CPM. Not used for PPM. MRPD?</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">// 16..23   FrameFlags1     PPM: Bit 0: 1 = RTC3 frame in red period, note: first RTC3 will come in green and is handled with additional descriptor for legacy start-up</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment">//                          Bit 1..7: reserved</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">// 24..31   FrameIndex      Current index of data source which is host on PPM and PRU on CPM.</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">//                          CPM: Before first packet received idx indicated to host with FrameIndex is idx_2 whereas PRU is on idx_0 (not shown in register) . After first packet received by PRU FrameIndex changes to idx_0 and BufferComplete flag is reset by PRU. PRU advances to next index which is idx_1.</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">// 0..15    RR              Reduction Ratio for red period which is max 16.</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">//                          Send in GREEN period: reduction ratio (max 512) set by host and used by PRU to find out whether current phase matches.</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">// 16..31   Phase           PPM: used for sendlist generation.</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="preprocessor">#ifdef PRU</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;.struct struct_rtc_cpm_desc</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    .u16    FrameReference</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    .u16    FrameLength</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    .u16    FrameDataPointer</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    .u8     FrameIndex</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    .u8     FrameFlags1</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    .u16    FrameID</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    .u8     FrameFlags2</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    .u8     Reserved</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    .u16    RR</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    .u16    Phase</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;.ends</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160; </div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;.struct struct_rtc_ppm_desc</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    .u16    FrameReference</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    .u16    FrameLength</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    .u32    FrameSendOffset</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    .u16    FrameID</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    .u8     Reserved</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    .u8     FrameIndex</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    .u16    RR</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    .u16    Phase</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;.ends</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">// cpm FrameFlags</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="preprocessor">#define     VLAN_TAG        t0</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment">// cpm/ppm FrameFlags</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="preprocessor">#define     RED_GREEN_FLAG  t0</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment">// FW ARM descriptor structure hard coded in driver</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment">// CPM/PPM list size is 16 * 8 = 128 bytes</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment">// each list has shadow list -&gt; 192 bytes</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a0c4fee2cc6728b4cb5325e405f26b148">  462</a></span>&#160;<span class="preprocessor">#define RTC_DESC_SIZE           16                      // increased for IRT</span></div>
<div class="line"><a name="l00463"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#aa229f7692cddd06ef3bcd7d8ce8db444">  463</a></span>&#160;<span class="preprocessor">#define RTC_CPM_LIST_SIZE       RTC_DESC_SIZE * NO_CPM</span></div>
<div class="line"><a name="l00464"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a66ee15a607fef25c74ceb1c22f48d0f6">  464</a></span>&#160;<span class="preprocessor">#define RTC_PPM_LIST_SIZE       RTC_DESC_SIZE * NO_PPM</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">// ICSS PRU0 DMEM 8 kB</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160; </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">// RTC descriptors</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160; </div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">// CPM/PPM descriptors have 16 bytes length. There is one descriptor per triple buffer.</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">// There is a second list for the host to prepare new connection in background.</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ae3c61878a4592a6b4ef7bb798012ed6d">  473</a></span>&#160;<span class="preprocessor">#define RTC_CPM_IDX0_OFFSET     0x200</span></div>
<div class="line"><a name="l00474"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#afe24e8ebc5842c02049858610e2534d2">  474</a></span>&#160;<span class="preprocessor">#define RTC_PPM_IDX0_OFFSET     RTC_CPM_IDX0_OFFSET + RTC_DESC_SIZE * NO_CPM</span></div>
<div class="line"><a name="l00475"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a73005a99c54d20227b0b7d4877bac6b2">  475</a></span>&#160;<span class="preprocessor">#define RTC_PPM_IDX1_OFFSET     RTC_PPM_IDX0_OFFSET + RTC_DESC_SIZE * NO_PPM</span></div>
<div class="line"><a name="l00476"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a48f1a3994eb9ba8492ccc9d4b2cc96a3">  476</a></span>&#160;<span class="preprocessor">#define EOF_PPM_LIST_OFFSET     RTC_PPM_IDX1_OFFSET + RTC_DESC_SIZE * NO_PPM</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">// Blocking tables for MRP. Each Port has it&#39;s own Blocking static multicast receive and forward table.</span></div>
<div class="line"><a name="l00479"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a3ab4e34f6bed130fb035449586bffe1f">  479</a></span>&#160;<span class="preprocessor">#define NO_ROWS         50</span></div>
<div class="line"><a name="l00480"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ad785bd9697b561878394dbbf71448b43">  480</a></span>&#160;<span class="preprocessor">#define SIZE_OF_ROW     4</span></div>
<div class="line"><a name="l00481"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ae3863ec5cd4910fee3f8c7a74d4eec81">  481</a></span>&#160;<span class="preprocessor">#define BLOCKING_STATIC_MAC_TABLE_RCV       EOF_PPM_LIST_OFFSET</span></div>
<div class="line"><a name="l00482"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a3cb3851330bbddd9726e12aef5c0c615">  482</a></span>&#160;<span class="preprocessor">#define BLOCKING_STATIC_MAC_TABLE_FWD       BLOCKING_STATIC_MAC_TABLE_RCV + NO_ROWS * SIZE_OF_ROW</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160; </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ab875b2f6f8bf3ed9d39f7efd2244af66">  485</a></span>&#160;<span class="preprocessor">#define DCP_IDENT_REQ_OFFSET                0x0600</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">// ICSS PRU1 DMEM 8 kB</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160; </div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">// PPM buffer has 1440 bytes IO data which can be shared over 8 connections</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">// Each connection has a full packet with Ethernet header, FID, DATA, Status.</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">// Host prepares complete packet which may include VLAN tag. Although RTC</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment">// packet will bypass send queues and has no effect on tags.</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">// Total size needed is:</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment">// 8 * 26 bytes (header, FID, cycle counter, data status, transfer status)</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">// 1440 bytes IO data</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">// triple buffered: 3 * 1440 + 3 * 8 (26) = 4944 bytes = 0x1350</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">// absolute address is referenced by RTC descriptor FrameIndex</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment">// organization on PPM buffer is managed by host. PRU only executes send list</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment">// and fills in cycles counter and transfer status.</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ae6471286aba54eaf31ac0ae0dcd8eaea">  501</a></span>&#160;<span class="preprocessor">#define PPM_IO_DATA_SIZE        1440        // FW driver uses this value also for CPM data size!</span></div>
<div class="line"><a name="l00502"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a6699267064144be2fe1b03fb1bac1187">  502</a></span>&#160;<span class="preprocessor">#define PPM_ETH_HEADER          12+4+2+2    // includes VLAN and FID</span></div>
<div class="line"><a name="l00503"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a7d5209967dd50fb8f909035a8f8f0369">  503</a></span>&#160;<span class="preprocessor">#define PPM_TRAILER             2+1+1       // cycle counter, data status, transfer status</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">// FW extended PPM buffer model requires two blocks in different Data RAMs</span></div>
<div class="line"><a name="l00505"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#af6829ed5ce94308c866d94d40d27f648">  505</a></span>&#160;<span class="preprocessor">#define PPM_BUFFER_OFFSET0      0x0D00      // buffer block 0   Data RAM0</span></div>
<div class="line"><a name="l00506"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a4f7a7f111e529af82c95cc007071fbe8">  506</a></span>&#160;<span class="preprocessor">#define PPM_BUFFER_OFFSET1      0x10            // buffer block 1   Data RAM1. Inital 16 bytes used for Firmware version</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">// Following two buffers are used to store a RTC3 frame which has to be forwarded</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">// PRU0</span></div>
<div class="line"><a name="l00510"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a735fdf7460748ac98322086c7b2d3aa6">  510</a></span>&#160;<span class="preprocessor">#define RTC3_SF_FSO_PRU0_OFFSET     0xBC00</span></div>
<div class="line"><a name="l00511"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a3b4e1c54648330aa0b7ac37d3c6ec75f">  511</a></span>&#160;<span class="preprocessor">#define RTC3_SF_LENGTH_PRU0_OFFSET  RTC3_SF_FSO_PRU0_OFFSET    + 4</span></div>
<div class="line"><a name="l00512"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#accbe39d9eace90f6b93be1d119a21866">  512</a></span>&#160;<span class="preprocessor">#define RTC3_SF_BUFFER_PRU0_OFFSET  RTC3_SF_LENGTH_PRU0_OFFSET + 4</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">// PRU1</span></div>
<div class="line"><a name="l00514"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#af6d91cd4a212b979c79076fff1f41900">  514</a></span>&#160;<span class="preprocessor">#define RTC3_SF_FSO_PRU1_OFFSET     0xE814</span></div>
<div class="line"><a name="l00515"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a49569e828f047dccd5a4d605383abc2a">  515</a></span>&#160;<span class="preprocessor">#define RTC3_SF_LENGTH_PRU1_OFFSET  RTC3_SF_FSO_PRU1_OFFSET    + 4</span></div>
<div class="line"><a name="l00516"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ac6bcd078a3a38741293aeac9d43408ee">  516</a></span>&#160;<span class="preprocessor">#define RTC3_SF_BUFFER_PRU1_OFFSET  RTC3_SF_LENGTH_PRU1_OFFSET + 4</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">// now each block has max of 4 packets</span></div>
<div class="line"><a name="l00519"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a156e07df51e122dc3ed21340e7825a98">  519</a></span>&#160;<span class="preprocessor">#define EOF_PPM_BUFFER_OFFSET   0x1218      // 3 * (1440+4*26) = 0x1218 (each block...)</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160; </div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">// ICSS Shared RAM 12kB</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160; </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment">// L3 64KB Memory - switch buffer Pool and CPM buffer</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment">// CPM buffer is at end of L3 Memory. Extend to two CPM of 1440 max...</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment">// 2-8 CPMs including header and CRC 3 * (2*1440 + 8*30) = 9360 = 0x2490</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment">// Tagged frames have tag bit set in descriptor for host to simplify parsing.</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment">// Incoming frames are verified in terms of FID, MAC, period, time, data hold time, status.</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">// In case there is a match and no error packet is put in the corresponding CPM buffer.</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">// Triple buffer management is managed through buffer complete flag and FrameIndex in RTC descriptor.</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ab094c5971d389ff4e82ca5310337147a">  533</a></span>&#160;<span class="preprocessor">#define CPM_IO_DATA_SIZE        1440</span></div>
<div class="line"><a name="l00534"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#aacf57a3bd2a64bc400388c59510abcc9">  534</a></span>&#160;<span class="preprocessor">#define CPM_ETH_HEADER          12+4+2+2    // includes VLAN and FID</span></div>
<div class="line"><a name="l00535"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a37190752a9fc940131d7ba2b6251388a">  535</a></span>&#160;<span class="preprocessor">#define CPM_TRAILER             2+1+1+4     // cycle counter, data status, transfer status, CRC</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160; </div>
<div class="line"><a name="l00537"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ad899574cb81ee6c3a1c218179188a1d7">  537</a></span>&#160;<span class="preprocessor">#define EOF_CPM_BUFFER_OFFSET   0xE690      // 0xC200+0x2490</span></div>
<div class="line"><a name="l00538"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a4136fe3ff72fed7da2f4c4a7bb14682e">  538</a></span>&#160;<span class="preprocessor">#define CPM_BUFFER_OFFSET       0xC200</span></div>
<div class="line"><a name="l00539"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#af32136ad033064909ba31776fa437fb2">  539</a></span>&#160;<span class="preprocessor">#define EOF_48K_BUFFER_OFFSET   0xC200</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">//=====================================PTCP RELATED DATA=====================================//</span></div>
<div class="line"><a name="l00542"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#abb0164b529c65619be7ffec868ef87a8">  542</a></span>&#160;<span class="preprocessor">#define P2_T2_ABS_TS_OFFSET     0x278</span></div>
<div class="line"><a name="l00543"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#aa3f8508ad9cec660b58833400cfd2929">  543</a></span>&#160;<span class="preprocessor">#define P1_T2_ABS_TS_OFFSET     0x274</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160; </div>
<div class="line"><a name="l00545"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a74cbf9ced61c017c07b1bc0a2ec1eab3">  545</a></span>&#160;<span class="preprocessor">#define SYNC_CYCLE_COUNTER  0x0270</span></div>
<div class="line"><a name="l00546"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a7bdd299750e93821903e8c85709b0c19">  546</a></span>&#160;<span class="preprocessor">#define SYNC_SF_BUF_OFFSET_P2                           PTCP_BASE_ADDR_OFFSET + 528     //94 bytes</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160; </div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">//these four offsets are only accessed from ARM</span></div>
<div class="line"><a name="l00549"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ad480949fba0761a558a4c45e698ff99d">  549</a></span>&#160;<span class="preprocessor">#define PORT2_DELAY_REQ_FRAME_OFFSET                    PTCP_BASE_ADDR_OFFSET + 452     //60-bytes</span></div>
<div class="line"><a name="l00550"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a9bc97959c105418ffdc382e2e76a00c5">  550</a></span>&#160;<span class="preprocessor">#define PORT1_DELAY_REQ_FRAME_OFFSET                    PTCP_BASE_ADDR_OFFSET + 392     //60-bytes</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a524b26e38ffde20f7c0089412cfb7fbf">  552</a></span>&#160;<span class="preprocessor">#define PORT2_DELAY_RESP_FRAME_OFFSET                   PTCP_BASE_ADDR_OFFSET + 324     //66-bytes</span></div>
<div class="line"><a name="l00553"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ae737d93502da5398d0f3447fe4d0cc45">  553</a></span>&#160;<span class="preprocessor">#define PORT1_DELAY_RESP_FRAME_OFFSET                   PTCP_BASE_ADDR_OFFSET + 256     //66-bytes</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160; </div>
<div class="line"><a name="l00555"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a9d29ec38d5310095d911c2e2a947c12c">  555</a></span>&#160;<span class="preprocessor">#define SYNC_INIT_FLAG_OFFSET                           PTCP_BASE_ADDR_OFFSET + 254     // 1 byte required</span></div>
<div class="line"><a name="l00556"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a19cfda8302589d1dcd54a111eb4c7d3e">  556</a></span>&#160;<span class="preprocessor">#define SYNC_MASTER_MAC_OFFSET                          PTCP_BASE_ADDR_OFFSET + 248     //6-bytes required</span></div>
<div class="line"><a name="l00557"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a44f1bb4f762595e552f2533a44cf196c">  557</a></span>&#160;<span class="preprocessor">#define SYNC_UUID_OFFSET                                PTCP_BASE_ADDR_OFFSET + 232     //16-bytes</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160; </div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160; </div>
<div class="line"><a name="l00560"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a0b4326e374b106e6e03fd9bd570e9f75">  560</a></span>&#160;<span class="preprocessor">#define SYNC_SF_BUF_OFFSET_P1                           PTCP_BASE_ADDR_OFFSET + 136     //94 bytes</span></div>
<div class="line"><a name="l00561"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a3e0d9e32c8ae5b4b64533fee49242cc2">  561</a></span>&#160;<span class="preprocessor">#define SYNC_SBLOCK_OFFSET                              PTCP_BASE_ADDR_OFFSET + 104     //32 bytes  // cut-through</span></div>
<div class="line"><a name="l00562"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#abaef477e28ce63a6142a31393281aeb7">  562</a></span>&#160;<span class="preprocessor">#define SYNC_W_FUP_CTRL_BYTE_OFFSET                     PTCP_BASE_ADDR_OFFSET + 100     //1 byte</span></div>
<div class="line"><a name="l00563"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a92bc8289bdd1fd7f69eefa5409a2bcac">  563</a></span>&#160;<span class="preprocessor">#define SYNC_CTRL_BYTE_OFFSET                           PTCP_BASE_ADDR_OFFSET + 96      //1 byte</span></div>
<div class="line"><a name="l00564"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a694704398fb4a6ad18f5ff5b88b64a04">  564</a></span>&#160;<span class="preprocessor">#define SYNC_RCV_CYCLE_CTR_OFFSET                       PTCP_BASE_ADDR_OFFSET + 92      //2 bytes   // not being used</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160; </div>
<div class="line"><a name="l00566"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a21628770ea712e021959db1644ad3ea5">  566</a></span>&#160;<span class="preprocessor">#define SYNC_TORG_TIME_OFFSET                           PTCP_BASE_ADDR_OFFSET + 84      // 8 bytes  // cut-through</span></div>
<div class="line"><a name="l00567"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a5eb570cff1a54cb88da69deda7810ff9">  567</a></span>&#160;<span class="preprocessor">#define SYNC_FUP_DELAY_OFFSET                           PTCP_BASE_ADDR_OFFSET + 80</span></div>
<div class="line"><a name="l00568"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a011fbe26eed0e8e8eac3ff947bdbfe3f">  568</a></span>&#160;<span class="preprocessor">#define P2_DELAY_RESP_CTRL_OFFSET                       PTCP_BASE_ADDR_OFFSET + 78</span></div>
<div class="line"><a name="l00569"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a1472e842b3372ff281e477c4a3dc986c">  569</a></span>&#160;<span class="preprocessor">#define P1_DELAY_RESP_CTRL_OFFSET                       PTCP_BASE_ADDR_OFFSET + 77</span></div>
<div class="line"><a name="l00570"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a8d09f8c91dcee7713cd068c6e511219a">  570</a></span>&#160;<span class="preprocessor">#define SYNC_FWD_ENABLED_OFFSET                         PTCP_BASE_ADDR_OFFSET + 76      // 1 byte required</span></div>
<div class="line"><a name="l00571"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a69f623121cb5737403045f51fc2e309c">  571</a></span>&#160;<span class="preprocessor">#define SYNC_RX_SOF_OFFSET_P1                           PTCP_BASE_ADDR_OFFSET + 72</span></div>
<div class="line"><a name="l00572"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a45f13127cc810a5ff141de2611513d51">  572</a></span>&#160;<span class="preprocessor">#define SYNC_RX_SOF_OFFSET                              PTCP_BASE_ADDR_OFFSET + 68      // cut-through</span></div>
<div class="line"><a name="l00573"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a09187a0eb7a5044eca869e8d144dd14b">  573</a></span>&#160;<span class="preprocessor">#define SYNC_INDELAY_PLUS_LD_OFFSET                     PTCP_BASE_ADDR_OFFSET + 64      // cut-through</span></div>
<div class="line"><a name="l00574"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ae038aef6570e9e94ca2e84b1ebfdabc8">  574</a></span>&#160;<span class="preprocessor">#define SYNC_RX_SOF_OFFSET_P2                           PTCP_BASE_ADDR_OFFSET + 60</span></div>
<div class="line"><a name="l00575"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ae74a564e904763fb8b311e645aae96f2">  575</a></span>&#160;<span class="preprocessor">#define SYNC_SEQID_OFFSET                               PTCP_BASE_ADDR_OFFSET + 56</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160; </div>
<div class="line"><a name="l00577"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a86ca060a5f615d4694fe36e5c99f6278">  577</a></span>&#160;<span class="preprocessor">#define PRU1_HANDSHAKE_OFFSET                           PTCP_BASE_ADDR_OFFSET + 52</span></div>
<div class="line"><a name="l00578"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a983fb5c99b4ba9fa660edc4f72211d98">  578</a></span>&#160;<span class="preprocessor">#define P2_SMA_LINE_DELAY_OFFSET                        PTCP_BASE_ADDR_OFFSET + 48</span></div>
<div class="line"><a name="l00579"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a15cc9b07d2b6f3a6ad323ba2c2f9065b">  579</a></span>&#160;<span class="preprocessor">#define P2_T2_TIME_STAMP_OFFSET                         PTCP_BASE_ADDR_OFFSET + 44</span></div>
<div class="line"><a name="l00580"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#aebb925defecb84a3af5abf38ca14824a">  580</a></span>&#160;<span class="preprocessor">#define P2_T4_CYCLE_CTR_OFFSET                          PTCP_BASE_ADDR_OFFSET + 40</span></div>
<div class="line"><a name="l00581"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a2a456c6d1205876ac88c9237f9bf5ae2">  581</a></span>&#160;<span class="preprocessor">#define P2_T4_TIME_STAMP_OFFSET                         PTCP_BASE_ADDR_OFFSET + 36</span></div>
<div class="line"><a name="l00582"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ac4fa2a65ac1090845529ae21a06a557b">  582</a></span>&#160;<span class="preprocessor">#define P2_T1_CYCLE_CTR_OFFSET                          PTCP_BASE_ADDR_OFFSET + 32</span></div>
<div class="line"><a name="l00583"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a6a6fb6dacb36aa2263ffeabe789a3298">  583</a></span>&#160;<span class="preprocessor">#define P2_T1_TIME_STAMP_OFFSET                         PTCP_BASE_ADDR_OFFSET + 28</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; </div>
<div class="line"><a name="l00585"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a9ac35b2bdec99e07ddbc5660685071ea">  585</a></span>&#160;<span class="preprocessor">#define PRU0_HANDSHAKE_OFFSET                           PTCP_BASE_ADDR_OFFSET + 24</span></div>
<div class="line"><a name="l00586"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a0d78060d94f017f7daad55059e4d20e4">  586</a></span>&#160;<span class="preprocessor">#define P1_SMA_LINE_DELAY_OFFSET                        PTCP_BASE_ADDR_OFFSET + 20</span></div>
<div class="line"><a name="l00587"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ab484afbba2d5e548cfb94328843b9041">  587</a></span>&#160;<span class="preprocessor">#define P1_T2_TIME_STAMP_OFFSET                         PTCP_BASE_ADDR_OFFSET + 16</span></div>
<div class="line"><a name="l00588"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ab7ccfd84b538fa3fae8fd8b886802ad8">  588</a></span>&#160;<span class="preprocessor">#define P1_T4_CYCLE_CTR_OFFSET                          PTCP_BASE_ADDR_OFFSET + 12</span></div>
<div class="line"><a name="l00589"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a5b27bf2b4aac771a6274f85e881a5e23">  589</a></span>&#160;<span class="preprocessor">#define P1_T4_TIME_STAMP_OFFSET                         PTCP_BASE_ADDR_OFFSET + 8</span></div>
<div class="line"><a name="l00590"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ac46904943a49becbdfdba2866871d666">  590</a></span>&#160;<span class="preprocessor">#define P1_T1_CYCLE_CTR_OFFSET                          PTCP_BASE_ADDR_OFFSET + 4</span></div>
<div class="line"><a name="l00591"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a733c1501f029333c6c5161e1fade236f">  591</a></span>&#160;<span class="preprocessor">#define P1_T1_TIME_STAMP_OFFSET                         PTCP_BASE_ADDR_OFFSET + 0</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160; </div>
<div class="line"><a name="l00593"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#aaf0967a189705b3ea2c33da75bb7bf0c">  593</a></span>&#160;<span class="preprocessor">#define PTCP_BASE_ADDR_OFFSET                           0x0000</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160; </div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment">//==========================================================================================//</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160; </div>
<div class="line"><a name="l00597"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ac4ee7d012050b063d7b22515bc7b05ab">  597</a></span>&#160;<span class="preprocessor">#define ECAP_CLR_CONFIG_OFFSET      PTCP_L3_OCMC_BASE + 272     //4 bytes</span></div>
<div class="line"><a name="l00598"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a641d68416e0b78a9eb3de5d914573969">  598</a></span>&#160;<span class="preprocessor">#define IEP_CONFIG_ADJ_OFFSET       PTCP_L3_OCMC_BASE + 260     //12 bytes</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160; </div>
<div class="line"><a name="l00600"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a4448750a78c60b6d5fb96acf0cf22930">  600</a></span>&#160;<span class="preprocessor">#define P2_PTCP_CTRL_OFFSET         PTCP_L3_OCMC_BASE + 257</span></div>
<div class="line"><a name="l00601"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a8759a65e49362ae067c6e58aeee15c4b">  601</a></span>&#160;<span class="preprocessor">#define P1_PTCP_CTRL_OFFSET         PTCP_L3_OCMC_BASE + 256</span></div>
<div class="line"><a name="l00602"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a1beee8854415bb4ac4c11f7124201df2">  602</a></span>&#160;<span class="preprocessor">#define P2_DLY_FUP_PACKET_OFFSET    PTCP_L3_OCMC_BASE + 192</span></div>
<div class="line"><a name="l00603"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#abe7dd8cf3b91ab40f3fe64a46f875b34">  603</a></span>&#160;<span class="preprocessor">#define P1_DLY_FUP_PACKET_OFFSET    PTCP_L3_OCMC_BASE + 128</span></div>
<div class="line"><a name="l00604"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a6cc2c4d0453baf753c4a81a2e0271ada">  604</a></span>&#160;<span class="preprocessor">#define P2_DLY_RSP_PACKET_OFFSET    PTCP_L3_OCMC_BASE + 64</span></div>
<div class="line"><a name="l00605"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a5d6b211fe940eb9b74665f5690b21f1f">  605</a></span>&#160;<span class="preprocessor">#define P1_DLY_RSP_PACKET_OFFSET    PTCP_L3_OCMC_BASE</span></div>
<div class="line"><a name="l00606"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a2b8e9722c468fc0289ff8014b84562dd">  606</a></span>&#160;<span class="preprocessor">#define PTCP_L3_OCMC_BASE           0xE700              // moved to accomondate larger CPM buffer</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160; </div>
<div class="line"><a name="l00608"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ab9cd532d21d28ca259064aa49490afcb">  608</a></span>&#160;<span class="preprocessor">#define PTCP_PHASE_COUNTER_OFFSET       RTC_PHASE_COUNTER_OFFSET</span></div>
<div class="line"><a name="l00609"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a99f7e2e5fce2035ccdeac0c619807ffe">  609</a></span>&#160;<span class="preprocessor">#define PTCP_BASE_CLK_OFFSET            RTC_BASE_CLK_OFFSET</span></div>
<div class="line"><a name="l00610"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ac3688bc1b0ec653068492acd2df86962">  610</a></span>&#160;<span class="preprocessor">#define PTCP_PM_CYCLE_COUNTER_OFFSET    RTC_CYCLE_COUNTER_OFFSET</span></div>
<div class="line"><a name="l00611"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ae40175e413b3b53f19d16e610a3b0836">  611</a></span>&#160;<span class="preprocessor">#define PTCP_PM_PHASE_COUNTER_OFFSET    RTC_PHASE_COUNTER_OFFSET</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160; </div>
<div class="line"><a name="l00613"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a97f110db08796fe50184b8fcc620dd10">  613</a></span>&#160;<span class="preprocessor">#define P2_MAC_ADDR             0x1E50</span></div>
<div class="line"><a name="l00614"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#aa8513f0c189ef2eb2df3260ede729df9">  614</a></span>&#160;<span class="preprocessor">#define P1_MAC_ADDR             0x1E48</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160; </div>
<div class="line"><a name="l00616"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#a8a033649240186a58053b60e86c5c32a">  616</a></span>&#160;<span class="preprocessor">#define STATIC_MAC_TABLE_FWD_PORT2 STATIC_MAC_TABLE_RCV_PORT2  + 256</span></div>
<div class="line"><a name="l00617"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#aaf2de5b81590a7ce31e360a3857aab8d">  617</a></span>&#160;<span class="preprocessor">#define STATIC_MAC_TABLE_RCV_PORT2 STATIC_MAC_TABLE_FWD_PORT1  + 256</span></div>
<div class="line"><a name="l00618"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#af335587caebf479f844ba518a8ba1d71">  618</a></span>&#160;<span class="preprocessor">#define STATIC_MAC_TABLE_FWD_PORT1 STATIC_MAC_TABLE_RCV_PORT1  + 256</span></div>
<div class="line"><a name="l00619"></a><span class="lineno"><a class="line" href="icss__pn__rtcx_8h.html#ad41863ac576d097e6a27d6a42a87506e">  619</a></span>&#160;<span class="preprocessor">#define STATIC_MAC_TABLE_RCV_PORT1 0x2000</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="preprocessor">#endif //__ICSS_PN_RTCX__</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160; </div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li><li class="navelem"><a class="el" href="dir_593b91189fcbfa8afce3c398c2e48d5a.html">industrial_comms</a></li><li class="navelem"><a class="el" href="dir_ee574c85ac6f0d2190c0e347ec953e85.html">profinet_device</a></li><li class="navelem"><a class="el" href="dir_06f4baf6a0a2f9d0b2b6ef630d95cf59.html">icss_fwhal</a></li><li class="navelem"><a class="el" href="dir_cd707c5a6eb5a607871f2ac2e5464000.html">firmware</a></li><li class="navelem"><a class="el" href="icss__pn__rtcx_8h.html">icss_pn_rtcx.h</a></li>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
